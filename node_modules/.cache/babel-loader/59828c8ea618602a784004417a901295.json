{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.targetsSupported = targetsSupported;\nexports.isRequired = isRequired;\nexports.default = filterItems;\n\nvar _semver = _interopRequireDefault(require(\"semver\"));\n\nvar _plugins = _interopRequireDefault(require(\"@babel/compat-data/plugins\"));\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction targetsSupported(target, support) {\n  const targetEnvironments = Object.keys(target);\n\n  if (targetEnvironments.length === 0) {\n    return false;\n  }\n\n  const unsupportedEnvironments = targetEnvironments.filter(environment => {\n    const lowestImplementedVersion = (0, _utils.getLowestImplementedVersion)(support, environment);\n\n    if (!lowestImplementedVersion) {\n      return true;\n    }\n\n    const lowestTargetedVersion = target[environment];\n\n    if ((0, _utils.isUnreleasedVersion)(lowestTargetedVersion, environment)) {\n      return false;\n    }\n\n    if ((0, _utils.isUnreleasedVersion)(lowestImplementedVersion, environment)) {\n      return true;\n    }\n\n    if (!_semver.default.valid(lowestTargetedVersion.toString())) {\n      throw new Error(`Invalid version passed for target \"${environment}\": \"${lowestTargetedVersion}\". ` + \"Versions must be in semver format (major.minor.patch)\");\n    }\n\n    return _semver.default.gt((0, _utils.semverify)(lowestImplementedVersion), lowestTargetedVersion.toString());\n  });\n  return unsupportedEnvironments.length === 0;\n}\n\nfunction isRequired(name, targets, {\n  compatData = _plugins.default,\n  includes,\n  excludes\n} = {}) {\n  if (excludes == null ? void 0 : excludes.has(name)) return false;\n  if (includes == null ? void 0 : includes.has(name)) return true;\n  return !targetsSupported(targets, compatData[name]);\n}\n\nfunction filterItems(list, includes, excludes, targets, defaultIncludes, defaultExcludes, pluginSyntaxMap) {\n  const result = new Set();\n  const options = {\n    compatData: list,\n    includes,\n    excludes\n  };\n\n  for (const item in list) {\n    if (isRequired(item, targets, options)) {\n      result.add(item);\n    } else if (pluginSyntaxMap) {\n      const shippedProposalsSyntax = pluginSyntaxMap.get(item);\n\n      if (shippedProposalsSyntax) {\n        result.add(shippedProposalsSyntax);\n      }\n    }\n  }\n\n  if (defaultIncludes) {\n    defaultIncludes.forEach(item => !excludes.has(item) && result.add(item));\n  }\n\n  if (defaultExcludes) {\n    defaultExcludes.forEach(item => !includes.has(item) && result.delete(item));\n  }\n\n  return result;\n}","map":{"version":3,"sources":["/home/agatha/open/node_modules/@babel/helper-compilation-targets/lib/filter-items.js"],"names":["Object","defineProperty","exports","value","targetsSupported","isRequired","default","filterItems","_semver","_interopRequireDefault","require","_plugins","_utils","obj","__esModule","target","support","targetEnvironments","keys","length","unsupportedEnvironments","filter","environment","lowestImplementedVersion","getLowestImplementedVersion","lowestTargetedVersion","isUnreleasedVersion","valid","toString","Error","gt","semverify","name","targets","compatData","includes","excludes","has","list","defaultIncludes","defaultExcludes","pluginSyntaxMap","result","Set","options","item","add","shippedProposalsSyntax","get","forEach","delete"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.targetsSupported = targetsSupported;\nexports.isRequired = isRequired;\nexports.default = filterItems;\n\nvar _semver = _interopRequireDefault(require(\"semver\"));\n\nvar _plugins = _interopRequireDefault(require(\"@babel/compat-data/plugins\"));\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction targetsSupported(target, support) {\n  const targetEnvironments = Object.keys(target);\n\n  if (targetEnvironments.length === 0) {\n    return false;\n  }\n\n  const unsupportedEnvironments = targetEnvironments.filter(environment => {\n    const lowestImplementedVersion = (0, _utils.getLowestImplementedVersion)(support, environment);\n\n    if (!lowestImplementedVersion) {\n      return true;\n    }\n\n    const lowestTargetedVersion = target[environment];\n\n    if ((0, _utils.isUnreleasedVersion)(lowestTargetedVersion, environment)) {\n      return false;\n    }\n\n    if ((0, _utils.isUnreleasedVersion)(lowestImplementedVersion, environment)) {\n      return true;\n    }\n\n    if (!_semver.default.valid(lowestTargetedVersion.toString())) {\n      throw new Error(`Invalid version passed for target \"${environment}\": \"${lowestTargetedVersion}\". ` + \"Versions must be in semver format (major.minor.patch)\");\n    }\n\n    return _semver.default.gt((0, _utils.semverify)(lowestImplementedVersion), lowestTargetedVersion.toString());\n  });\n  return unsupportedEnvironments.length === 0;\n}\n\nfunction isRequired(name, targets, {\n  compatData = _plugins.default,\n  includes,\n  excludes\n} = {}) {\n  if (excludes == null ? void 0 : excludes.has(name)) return false;\n  if (includes == null ? void 0 : includes.has(name)) return true;\n  return !targetsSupported(targets, compatData[name]);\n}\n\nfunction filterItems(list, includes, excludes, targets, defaultIncludes, defaultExcludes, pluginSyntaxMap) {\n  const result = new Set();\n  const options = {\n    compatData: list,\n    includes,\n    excludes\n  };\n\n  for (const item in list) {\n    if (isRequired(item, targets, options)) {\n      result.add(item);\n    } else if (pluginSyntaxMap) {\n      const shippedProposalsSyntax = pluginSyntaxMap.get(item);\n\n      if (shippedProposalsSyntax) {\n        result.add(shippedProposalsSyntax);\n      }\n    }\n  }\n\n  if (defaultIncludes) {\n    defaultIncludes.forEach(item => !excludes.has(item) && result.add(item));\n  }\n\n  if (defaultExcludes) {\n    defaultExcludes.forEach(item => !includes.has(item) && result.delete(item));\n  }\n\n  return result;\n}"]},"metadata":{},"sourceType":"script"}