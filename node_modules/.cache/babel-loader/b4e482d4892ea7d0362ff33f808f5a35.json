{"ast":null,"code":"import MagicString from 'magic-string';\nimport { createFilter } from '@rollup/pluginutils';\n\nfunction escape(str) {\n  return str.replace(/[-[\\]/{}()*+?.\\\\^$|]/g, '\\\\$&');\n}\n\nfunction ensureFunction(functionOrValue) {\n  if (typeof functionOrValue === 'function') {\n    return functionOrValue;\n  }\n\n  return function () {\n    return functionOrValue;\n  };\n}\n\nfunction longest(a, b) {\n  return b.length - a.length;\n}\n\nfunction getReplacements(options) {\n  if (options.values) {\n    return Object.assign({}, options.values);\n  }\n\n  var values = Object.assign({}, options);\n  delete values.delimiters;\n  delete values.include;\n  delete values.exclude;\n  delete values.sourcemap;\n  delete values.sourceMap;\n  return values;\n}\n\nfunction mapToFunctions(object) {\n  return Object.keys(object).reduce(function (fns, key) {\n    var functions = Object.assign({}, fns);\n    functions[key] = ensureFunction(object[key]);\n    return functions;\n  }, {});\n}\n\nfunction replace(options) {\n  if (options === void 0) options = {};\n  var filter = createFilter(options.include, options.exclude);\n  var delimiters = options.delimiters;\n  var functionValues = mapToFunctions(getReplacements(options));\n  var keys = Object.keys(functionValues).sort(longest).map(escape);\n  var pattern = delimiters ? new RegExp(escape(delimiters[0]) + \"(\" + keys.join('|') + \")\" + escape(delimiters[1]), 'g') : new RegExp(\"\\\\b(\" + keys.join('|') + \")\\\\b\", 'g');\n  return {\n    name: 'replace',\n    renderChunk: function renderChunk(code, chunk) {\n      var id = chunk.fileName;\n\n      if (!keys.length) {\n        return null;\n      }\n\n      if (!filter(id)) {\n        return null;\n      }\n\n      return executeReplacement(code, id);\n    },\n    transform: function transform(code, id) {\n      if (!keys.length) {\n        return null;\n      }\n\n      if (!filter(id)) {\n        return null;\n      }\n\n      return executeReplacement(code, id);\n    }\n  };\n\n  function executeReplacement(code, id) {\n    var magicString = new MagicString(code);\n\n    if (!codeHasReplacements(code, id, magicString)) {\n      return null;\n    }\n\n    var result = {\n      code: magicString.toString()\n    };\n\n    if (isSourceMapEnabled()) {\n      result.map = magicString.generateMap({\n        hires: true\n      });\n    }\n\n    return result;\n  }\n\n  function codeHasReplacements(code, id, magicString) {\n    var result = false;\n    var match; // eslint-disable-next-line no-cond-assign\n\n    while (match = pattern.exec(code)) {\n      result = true;\n      var start = match.index;\n      var end = start + match[0].length;\n      var replacement = String(functionValues[match[1]](id));\n      magicString.overwrite(start, end, replacement);\n    }\n\n    return result;\n  }\n\n  function isSourceMapEnabled() {\n    return options.sourceMap !== false && options.sourcemap !== false;\n  }\n}\n\nexport default replace;","map":{"version":3,"sources":["/home/agatha/open/node_modules/@rollup/plugin-replace/dist/rollup-plugin-replace.es.js"],"names":["MagicString","createFilter","escape","str","replace","ensureFunction","functionOrValue","longest","a","b","length","getReplacements","options","values","Object","assign","delimiters","include","exclude","sourcemap","sourceMap","mapToFunctions","object","keys","reduce","fns","key","functions","filter","functionValues","sort","map","pattern","RegExp","join","name","renderChunk","code","chunk","id","fileName","executeReplacement","transform","magicString","codeHasReplacements","result","toString","isSourceMapEnabled","generateMap","hires","match","exec","start","index","end","replacement","String","overwrite"],"mappings":"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","sourcesContent":["import MagicString from 'magic-string';\nimport { createFilter } from '@rollup/pluginutils';\n\nfunction escape(str) {\n  return str.replace(/[-[\\]/{}()*+?.\\\\^$|]/g, '\\\\$&');\n}\n\nfunction ensureFunction(functionOrValue) {\n  if (typeof functionOrValue === 'function') { return functionOrValue; }\n  return function () { return functionOrValue; };\n}\n\nfunction longest(a, b) {\n  return b.length - a.length;\n}\n\nfunction getReplacements(options) {\n  if (options.values) {\n    return Object.assign({}, options.values);\n  }\n  var values = Object.assign({}, options);\n  delete values.delimiters;\n  delete values.include;\n  delete values.exclude;\n  delete values.sourcemap;\n  delete values.sourceMap;\n  return values;\n}\n\nfunction mapToFunctions(object) {\n  return Object.keys(object).reduce(function (fns, key) {\n    var functions = Object.assign({}, fns);\n    functions[key] = ensureFunction(object[key]);\n    return functions;\n  }, {});\n}\n\nfunction replace(options) {\n  if ( options === void 0 ) options = {};\n\n  var filter = createFilter(options.include, options.exclude);\n  var delimiters = options.delimiters;\n  var functionValues = mapToFunctions(getReplacements(options));\n  var keys = Object.keys(functionValues)\n    .sort(longest)\n    .map(escape);\n  var pattern = delimiters\n    ? new RegExp(((escape(delimiters[0])) + \"(\" + (keys.join('|')) + \")\" + (escape(delimiters[1]))), 'g')\n    : new RegExp((\"\\\\b(\" + (keys.join('|')) + \")\\\\b\"), 'g');\n\n  return {\n    name: 'replace',\n\n    renderChunk: function renderChunk(code, chunk) {\n      var id = chunk.fileName;\n      if (!keys.length) { return null; }\n      if (!filter(id)) { return null; }\n      return executeReplacement(code, id);\n    },\n\n    transform: function transform(code, id) {\n      if (!keys.length) { return null; }\n      if (!filter(id)) { return null; }\n      return executeReplacement(code, id);\n    }\n  };\n\n  function executeReplacement(code, id) {\n    var magicString = new MagicString(code);\n    if (!codeHasReplacements(code, id, magicString)) {\n      return null;\n    }\n\n    var result = { code: magicString.toString() };\n    if (isSourceMapEnabled()) {\n      result.map = magicString.generateMap({ hires: true });\n    }\n    return result;\n  }\n\n  function codeHasReplacements(code, id, magicString) {\n    var result = false;\n    var match;\n\n    // eslint-disable-next-line no-cond-assign\n    while ((match = pattern.exec(code))) {\n      result = true;\n\n      var start = match.index;\n      var end = start + match[0].length;\n      var replacement = String(functionValues[match[1]](id));\n      magicString.overwrite(start, end, replacement);\n    }\n    return result;\n  }\n\n  function isSourceMapEnabled() {\n    return options.sourceMap !== false && options.sourcemap !== false;\n  }\n}\n\nexport default replace;\n"]},"metadata":{},"sourceType":"module"}