{"ast":null,"code":"\"use strict\";\n/*\n  Copyright 2018 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\n\nvar glob = require('glob');\n\nvar path = require('path');\n\nvar errors = require('./errors');\n\nvar getFileSize = require('./get-file-size');\n\nvar getFileHash = require('./get-file-hash');\n\nmodule.exports = function (globOptions) {\n  var globDirectory = globOptions.globDirectory,\n      globFollow = globOptions.globFollow,\n      globIgnores = globOptions.globIgnores,\n      globPattern = globOptions.globPattern,\n      globStrict = globOptions.globStrict;\n  var globbedFiles;\n\n  try {\n    globbedFiles = glob.sync(globPattern, {\n      cwd: globDirectory,\n      follow: globFollow,\n      ignore: globIgnores,\n      strict: globStrict\n    });\n  } catch (err) {\n    throw new Error(errors['unable-to-glob-files'] + \" '\".concat(err.message, \"'\"));\n  }\n\n  if (globbedFiles.length === 0) {\n    throw new Error(errors['useless-glob-pattern'] + ' ' + JSON.stringify({\n      globDirectory: globDirectory,\n      globPattern: globPattern,\n      globIgnores: globIgnores\n    }, null, 2));\n  }\n\n  var fileDetails = globbedFiles.map(function (file) {\n    var fullPath = path.join(globDirectory, file);\n    var fileSize = getFileSize(fullPath);\n\n    if (fileSize === null) {\n      return null;\n    }\n\n    var fileHash = getFileHash(fullPath);\n    return {\n      file: \"\".concat(path.relative(globDirectory, fullPath)),\n      hash: fileHash,\n      size: fileSize\n    };\n  }); // If !== null, means it's a valid file.\n\n  return fileDetails.filter(function (details) {\n    return details !== null;\n  });\n};","map":{"version":3,"sources":["/home/agatha/open/node_modules/workbox-build/build/lib/get-file-details.js"],"names":["glob","require","path","errors","getFileSize","getFileHash","module","exports","globOptions","globDirectory","globFollow","globIgnores","globPattern","globStrict","globbedFiles","sync","cwd","follow","ignore","strict","err","Error","message","length","JSON","stringify","fileDetails","map","file","fullPath","join","fileSize","fileHash","relative","hash","size","filter","details"],"mappings":"AAAA;AAEA;;;;;;;;AAOA,IAAMA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;;AAEA,IAAMC,IAAI,GAAGD,OAAO,CAAC,MAAD,CAApB;;AAEA,IAAME,MAAM,GAAGF,OAAO,CAAC,UAAD,CAAtB;;AAEA,IAAMG,WAAW,GAAGH,OAAO,CAAC,iBAAD,CAA3B;;AAEA,IAAMI,WAAW,GAAGJ,OAAO,CAAC,iBAAD,CAA3B;;AAEAK,MAAM,CAACC,OAAP,GAAiB,UAAAC,WAAW,EAAI;AAC9B,MAAMC,aAAa,GAAGD,WAAW,CAACC,aAAlC;AAAA,MACMC,UAAU,GAAGF,WAAW,CAACE,UAD/B;AAAA,MAEMC,WAAW,GAAGH,WAAW,CAACG,WAFhC;AAAA,MAGMC,WAAW,GAAGJ,WAAW,CAACI,WAHhC;AAAA,MAIMC,UAAU,GAAGL,WAAW,CAACK,UAJ/B;AAKA,MAAIC,YAAJ;;AAEA,MAAI;AACFA,IAAAA,YAAY,GAAGd,IAAI,CAACe,IAAL,CAAUH,WAAV,EAAuB;AACpCI,MAAAA,GAAG,EAAEP,aAD+B;AAEpCQ,MAAAA,MAAM,EAAEP,UAF4B;AAGpCQ,MAAAA,MAAM,EAAEP,WAH4B;AAIpCQ,MAAAA,MAAM,EAAEN;AAJ4B,KAAvB,CAAf;AAMD,GAPD,CAOE,OAAOO,GAAP,EAAY;AACZ,UAAM,IAAIC,KAAJ,CAAUlB,MAAM,CAAC,sBAAD,CAAN,eAAsCiB,GAAG,CAACE,OAA1C,MAAV,CAAN;AACD;;AAED,MAAIR,YAAY,CAACS,MAAb,KAAwB,CAA5B,EAA+B;AAC7B,UAAM,IAAIF,KAAJ,CAAUlB,MAAM,CAAC,sBAAD,CAAN,GAAiC,GAAjC,GAAuCqB,IAAI,CAACC,SAAL,CAAe;AACpEhB,MAAAA,aAAa,EAAbA,aADoE;AAEpEG,MAAAA,WAAW,EAAXA,WAFoE;AAGpED,MAAAA,WAAW,EAAXA;AAHoE,KAAf,EAIpD,IAJoD,EAI9C,CAJ8C,CAAjD,CAAN;AAKD;;AAED,MAAMe,WAAW,GAAGZ,YAAY,CAACa,GAAb,CAAiB,UAAAC,IAAI,EAAI;AAC3C,QAAMC,QAAQ,GAAG3B,IAAI,CAAC4B,IAAL,CAAUrB,aAAV,EAAyBmB,IAAzB,CAAjB;AACA,QAAMG,QAAQ,GAAG3B,WAAW,CAACyB,QAAD,CAA5B;;AAEA,QAAIE,QAAQ,KAAK,IAAjB,EAAuB;AACrB,aAAO,IAAP;AACD;;AAED,QAAMC,QAAQ,GAAG3B,WAAW,CAACwB,QAAD,CAA5B;AACA,WAAO;AACLD,MAAAA,IAAI,YAAK1B,IAAI,CAAC+B,QAAL,CAAcxB,aAAd,EAA6BoB,QAA7B,CAAL,CADC;AAELK,MAAAA,IAAI,EAAEF,QAFD;AAGLG,MAAAA,IAAI,EAAEJ;AAHD,KAAP;AAKD,GAdmB,CAApB,CA3B8B,CAyC1B;;AAEJ,SAAOL,WAAW,CAACU,MAAZ,CAAmB,UAAAC,OAAO;AAAA,WAAIA,OAAO,KAAK,IAAhB;AAAA,GAA1B,CAAP;AACD,CA5CD","sourcesContent":["\"use strict\";\n\n/*\n  Copyright 2018 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nconst glob = require('glob');\n\nconst path = require('path');\n\nconst errors = require('./errors');\n\nconst getFileSize = require('./get-file-size');\n\nconst getFileHash = require('./get-file-hash');\n\nmodule.exports = globOptions => {\n  const globDirectory = globOptions.globDirectory,\n        globFollow = globOptions.globFollow,\n        globIgnores = globOptions.globIgnores,\n        globPattern = globOptions.globPattern,\n        globStrict = globOptions.globStrict;\n  let globbedFiles;\n\n  try {\n    globbedFiles = glob.sync(globPattern, {\n      cwd: globDirectory,\n      follow: globFollow,\n      ignore: globIgnores,\n      strict: globStrict\n    });\n  } catch (err) {\n    throw new Error(errors['unable-to-glob-files'] + ` '${err.message}'`);\n  }\n\n  if (globbedFiles.length === 0) {\n    throw new Error(errors['useless-glob-pattern'] + ' ' + JSON.stringify({\n      globDirectory,\n      globPattern,\n      globIgnores\n    }, null, 2));\n  }\n\n  const fileDetails = globbedFiles.map(file => {\n    const fullPath = path.join(globDirectory, file);\n    const fileSize = getFileSize(fullPath);\n\n    if (fileSize === null) {\n      return null;\n    }\n\n    const fileHash = getFileHash(fullPath);\n    return {\n      file: `${path.relative(globDirectory, fullPath)}`,\n      hash: fileHash,\n      size: fileSize\n    };\n  }); // If !== null, means it's a valid file.\n\n  return fileDetails.filter(details => details !== null);\n};"]},"metadata":{},"sourceType":"script"}