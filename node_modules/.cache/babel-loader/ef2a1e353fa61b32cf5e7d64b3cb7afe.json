{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _helperPluginUtils = require(\"@babel/helper-plugin-utils\");\n\nvar _helperRemapAsyncToGenerator = _interopRequireDefault(require(\"@babel/helper-remap-async-to-generator\"));\n\nvar _pluginSyntaxAsyncGenerators = _interopRequireDefault(require(\"@babel/plugin-syntax-async-generators\"));\n\nvar _core = require(\"@babel/core\");\n\nvar _forAwait = _interopRequireDefault(require(\"./for-await\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar _default = (0, _helperPluginUtils.declare)(api => {\n  api.assertVersion(7);\n  const yieldStarVisitor = {\n    Function(path) {\n      path.skip();\n    },\n\n    YieldExpression({\n      node\n    }, state) {\n      if (!node.delegate) return;\n      const callee = state.addHelper(\"asyncGeneratorDelegate\");\n      node.argument = _core.types.callExpression(callee, [_core.types.callExpression(state.addHelper(\"asyncIterator\"), [node.argument]), state.addHelper(\"awaitAsyncGenerator\")]);\n    }\n\n  };\n  const forAwaitVisitor = {\n    Function(path) {\n      path.skip();\n    },\n\n    ForOfStatement(path, {\n      file\n    }) {\n      const {\n        node\n      } = path;\n      if (!node.await) return;\n      const build = (0, _forAwait.default)(path, {\n        getAsyncIterator: file.addHelper(\"asyncIterator\")\n      });\n      const {\n        declar,\n        loop\n      } = build;\n      const block = loop.body;\n      path.ensureBlock();\n\n      if (declar) {\n        block.body.push(declar);\n      }\n\n      block.body = block.body.concat(node.body.body);\n\n      _core.types.inherits(loop, node);\n\n      _core.types.inherits(loop.body, node.body);\n\n      if (build.replaceParent) {\n        path.parentPath.replaceWithMultiple(build.node);\n      } else {\n        path.replaceWithMultiple(build.node);\n      }\n    }\n\n  };\n  const visitor = {\n    Function(path, state) {\n      if (!path.node.async) return;\n      path.traverse(forAwaitVisitor, state);\n      if (!path.node.generator) return;\n      path.traverse(yieldStarVisitor, state);\n      (0, _helperRemapAsyncToGenerator.default)(path, {\n        wrapAsync: state.addHelper(\"wrapAsyncGenerator\"),\n        wrapAwait: state.addHelper(\"awaitAsyncGenerator\")\n      });\n    }\n\n  };\n  return {\n    name: \"proposal-async-generator-functions\",\n    inherits: _pluginSyntaxAsyncGenerators.default,\n    visitor: {\n      Program(path, state) {\n        path.traverse(visitor, state);\n      }\n\n    }\n  };\n});\n\nexports.default = _default;","map":{"version":3,"sources":["/home/agatha/open/node_modules/@babel/plugin-proposal-async-generator-functions/lib/index.js"],"names":["Object","defineProperty","exports","value","default","_helperPluginUtils","require","_helperRemapAsyncToGenerator","_interopRequireDefault","_pluginSyntaxAsyncGenerators","_core","_forAwait","obj","__esModule","_default","declare","api","assertVersion","yieldStarVisitor","Function","path","skip","YieldExpression","node","state","delegate","callee","addHelper","argument","types","callExpression","forAwaitVisitor","ForOfStatement","file","await","build","getAsyncIterator","declar","loop","block","body","ensureBlock","push","concat","inherits","replaceParent","parentPath","replaceWithMultiple","visitor","async","traverse","generator","wrapAsync","wrapAwait","name","Program"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _helperPluginUtils = require(\"@babel/helper-plugin-utils\");\n\nvar _helperRemapAsyncToGenerator = _interopRequireDefault(require(\"@babel/helper-remap-async-to-generator\"));\n\nvar _pluginSyntaxAsyncGenerators = _interopRequireDefault(require(\"@babel/plugin-syntax-async-generators\"));\n\nvar _core = require(\"@babel/core\");\n\nvar _forAwait = _interopRequireDefault(require(\"./for-await\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _default = (0, _helperPluginUtils.declare)(api => {\n  api.assertVersion(7);\n  const yieldStarVisitor = {\n    Function(path) {\n      path.skip();\n    },\n\n    YieldExpression({\n      node\n    }, state) {\n      if (!node.delegate) return;\n      const callee = state.addHelper(\"asyncGeneratorDelegate\");\n      node.argument = _core.types.callExpression(callee, [_core.types.callExpression(state.addHelper(\"asyncIterator\"), [node.argument]), state.addHelper(\"awaitAsyncGenerator\")]);\n    }\n\n  };\n  const forAwaitVisitor = {\n    Function(path) {\n      path.skip();\n    },\n\n    ForOfStatement(path, {\n      file\n    }) {\n      const {\n        node\n      } = path;\n      if (!node.await) return;\n      const build = (0, _forAwait.default)(path, {\n        getAsyncIterator: file.addHelper(\"asyncIterator\")\n      });\n      const {\n        declar,\n        loop\n      } = build;\n      const block = loop.body;\n      path.ensureBlock();\n\n      if (declar) {\n        block.body.push(declar);\n      }\n\n      block.body = block.body.concat(node.body.body);\n\n      _core.types.inherits(loop, node);\n\n      _core.types.inherits(loop.body, node.body);\n\n      if (build.replaceParent) {\n        path.parentPath.replaceWithMultiple(build.node);\n      } else {\n        path.replaceWithMultiple(build.node);\n      }\n    }\n\n  };\n  const visitor = {\n    Function(path, state) {\n      if (!path.node.async) return;\n      path.traverse(forAwaitVisitor, state);\n      if (!path.node.generator) return;\n      path.traverse(yieldStarVisitor, state);\n      (0, _helperRemapAsyncToGenerator.default)(path, {\n        wrapAsync: state.addHelper(\"wrapAsyncGenerator\"),\n        wrapAwait: state.addHelper(\"awaitAsyncGenerator\")\n      });\n    }\n\n  };\n  return {\n    name: \"proposal-async-generator-functions\",\n    inherits: _pluginSyntaxAsyncGenerators.default,\n    visitor: {\n      Program(path, state) {\n        path.traverse(visitor, state);\n      }\n\n    }\n  };\n});\n\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}