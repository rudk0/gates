{"ast":null,"code":"'use strict';\n\nvar _defineProperty = require(\"/home/agatha/open/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/defineProperty\");\n\nvar _classCallCheck = require(\"/home/agatha/open/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _assertThisInitialized = require(\"/home/agatha/open/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/assertThisInitialized\");\n\nvar _inherits = require(\"/home/agatha/open/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _createSuper = require(\"/home/agatha/open/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createSuper\");\n\nvar _toConsumableArray = require(\"/home/agatha/open/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\nvar Hoek = require('@hapi/hoek');\n\nvar Any = require('./types/any');\n\nvar Cast = require('./cast');\n\nvar Errors = require('./errors');\n\nvar Lazy = require('./types/lazy');\n\nvar Ref = require('./ref');\n\nvar internals = {\n  alternatives: require('./types/alternatives'),\n  array: require('./types/array'),\n  boolean: require('./types/boolean'),\n  binary: require('./types/binary'),\n  date: require('./types/date'),\n  func: require('./types/func'),\n  number: require('./types/number'),\n  object: require('./types/object'),\n  string: require('./types/string'),\n  symbol: require('./types/symbol')\n};\n\ninternals.callWithDefaults = function (schema, args) {\n  var _schema;\n\n  Hoek.assert(this, 'Must be invoked on a Joi instance.');\n\n  if (this._defaults) {\n    schema = this._defaults(schema);\n  }\n\n  schema._currentJoi = this;\n  return (_schema = schema)._init.apply(_schema, _toConsumableArray(args));\n};\n\ninternals.root = function () {\n  var any = new Any();\n  var root = any.clone();\n  Any.prototype._currentJoi = root;\n  root._currentJoi = root;\n  root._binds = new Set(['any', 'alternatives', 'alt', 'array', 'bool', 'boolean', 'binary', 'date', 'func', 'number', 'object', 'string', 'symbol', 'validate', 'describe', 'compile', 'assert', 'attempt', 'lazy', 'defaults', 'extend', 'allow', 'valid', 'only', 'equal', 'invalid', 'disallow', 'not', 'required', 'exist', 'optional', 'forbidden', 'strip', 'when', 'empty', 'default']);\n\n  root.any = function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    Hoek.assert(args.length === 0, 'Joi.any() does not allow arguments.');\n    return internals.callWithDefaults.call(this, any, args);\n  };\n\n  root.alternatives = root.alt = function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return internals.callWithDefaults.call(this, internals.alternatives, args);\n  };\n\n  root.array = function () {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    Hoek.assert(args.length === 0, 'Joi.array() does not allow arguments.');\n    return internals.callWithDefaults.call(this, internals.array, args);\n  };\n\n  root.boolean = root.bool = function () {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n\n    Hoek.assert(args.length === 0, 'Joi.boolean() does not allow arguments.');\n    return internals.callWithDefaults.call(this, internals.boolean, args);\n  };\n\n  root.binary = function () {\n    for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n      args[_key5] = arguments[_key5];\n    }\n\n    Hoek.assert(args.length === 0, 'Joi.binary() does not allow arguments.');\n    return internals.callWithDefaults.call(this, internals.binary, args);\n  };\n\n  root.date = function () {\n    for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n      args[_key6] = arguments[_key6];\n    }\n\n    Hoek.assert(args.length === 0, 'Joi.date() does not allow arguments.');\n    return internals.callWithDefaults.call(this, internals.date, args);\n  };\n\n  root.func = function () {\n    for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n      args[_key7] = arguments[_key7];\n    }\n\n    Hoek.assert(args.length === 0, 'Joi.func() does not allow arguments.');\n    return internals.callWithDefaults.call(this, internals.func, args);\n  };\n\n  root.number = function () {\n    for (var _len8 = arguments.length, args = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {\n      args[_key8] = arguments[_key8];\n    }\n\n    Hoek.assert(args.length === 0, 'Joi.number() does not allow arguments.');\n    return internals.callWithDefaults.call(this, internals.number, args);\n  };\n\n  root.object = function () {\n    for (var _len9 = arguments.length, args = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {\n      args[_key9] = arguments[_key9];\n    }\n\n    return internals.callWithDefaults.call(this, internals.object, args);\n  };\n\n  root.string = function () {\n    for (var _len10 = arguments.length, args = new Array(_len10), _key10 = 0; _key10 < _len10; _key10++) {\n      args[_key10] = arguments[_key10];\n    }\n\n    Hoek.assert(args.length === 0, 'Joi.string() does not allow arguments.');\n    return internals.callWithDefaults.call(this, internals.string, args);\n  };\n\n  root.symbol = function () {\n    for (var _len11 = arguments.length, args = new Array(_len11), _key11 = 0; _key11 < _len11; _key11++) {\n      args[_key11] = arguments[_key11];\n    }\n\n    Hoek.assert(args.length === 0, 'Joi.symbol() does not allow arguments.');\n    return internals.callWithDefaults.call(this, internals.symbol, args);\n  };\n\n  root.ref = function () {\n    return Ref.create.apply(Ref, arguments);\n  };\n\n  root.isRef = function (ref) {\n    return Ref.isRef(ref);\n  };\n\n  root.validate = function (value)\n  /*, [schema], [options], callback */\n  {\n    var _ref;\n\n    var last = (_ref = (arguments.length <= 1 ? 0 : arguments.length - 1) - 1 + 1, _ref < 1 || arguments.length <= _ref ? undefined : arguments[_ref]);\n    var callback = typeof last === 'function' ? last : null;\n    var count = (arguments.length <= 1 ? 0 : arguments.length - 1) - (callback ? 1 : 0);\n\n    if (count === 0) {\n      return any.validate(value, callback);\n    }\n\n    var options = count === 2 ? arguments.length <= 2 ? undefined : arguments[2] : undefined;\n    var schema = this.compile(arguments.length <= 1 ? undefined : arguments[1]);\n    return schema._validateWithOptions(value, options, callback);\n  };\n\n  root.describe = function () {\n    var schema = arguments.length ? this.compile(arguments.length <= 0 ? undefined : arguments[0]) : any;\n    return schema.describe();\n  };\n\n  root.compile = function (schema) {\n    try {\n      return Cast.schema(this, schema);\n    } catch (err) {\n      if (err.hasOwnProperty('path')) {\n        err.message = err.message + '(' + err.path + ')';\n      }\n\n      throw err;\n    }\n  };\n\n  root.assert = function (value, schema, message) {\n    this.attempt(value, schema, message);\n  };\n\n  root.attempt = function (value, schema, message) {\n    var result = this.validate(value, schema);\n    var error = result.error;\n\n    if (error) {\n      if (!message) {\n        if (typeof error.annotate === 'function') {\n          error.message = error.annotate();\n        }\n\n        throw error;\n      }\n\n      if (!(message instanceof Error)) {\n        if (typeof error.annotate === 'function') {\n          error.message = \"\".concat(message, \" \").concat(error.annotate());\n        }\n\n        throw error;\n      }\n\n      throw message;\n    }\n\n    return result.value;\n  };\n\n  root.reach = function (schema, path) {\n    Hoek.assert(schema && schema instanceof Any, 'you must provide a joi schema');\n    Hoek.assert(Array.isArray(path) || typeof path === 'string', 'path must be a string or an array of strings');\n\n    var reach = function reach(sourceSchema, schemaPath) {\n      if (!schemaPath.length) {\n        return sourceSchema;\n      }\n\n      var children = sourceSchema._inner.children;\n\n      if (!children) {\n        return;\n      }\n\n      var key = schemaPath.shift();\n\n      for (var i = 0; i < children.length; ++i) {\n        var child = children[i];\n\n        if (child.key === key) {\n          return reach(child.schema, schemaPath);\n        }\n      }\n    };\n\n    var schemaPath = typeof path === 'string' ? path ? path.split('.') : [] : path.slice();\n    return reach(schema, schemaPath);\n  };\n\n  root.lazy = function () {\n    for (var _len12 = arguments.length, args = new Array(_len12), _key12 = 0; _key12 < _len12; _key12++) {\n      args[_key12] = arguments[_key12];\n    }\n\n    return internals.callWithDefaults.call(this, Lazy, args);\n  };\n\n  root.defaults = function (fn) {\n    var _this = this;\n\n    Hoek.assert(typeof fn === 'function', 'Defaults must be a function');\n    var joi = Object.create(this.any());\n    joi = fn(joi);\n    Hoek.assert(joi && joi instanceof this.constructor, 'defaults() must return a schema');\n    Object.assign(joi, this, joi.clone()); // Re-add the types from `this` but also keep the settings from joi's potential new defaults\n\n    joi._defaults = function (schema) {\n      if (_this._defaults) {\n        schema = _this._defaults(schema);\n        Hoek.assert(schema instanceof _this.constructor, 'defaults() must return a schema');\n      }\n\n      schema = fn(schema);\n      Hoek.assert(schema instanceof _this.constructor, 'defaults() must return a schema');\n      return schema;\n    };\n\n    return joi;\n  };\n\n  root.bind = function () {\n    var joi = Object.create(this);\n\n    joi._binds.forEach(function (bind) {\n      joi[bind] = joi[bind].bind(joi);\n    });\n\n    return joi;\n  };\n\n  root.extend = function () {\n    var _this2 = this;\n\n    for (var _len13 = arguments.length, args = new Array(_len13), _key13 = 0; _key13 < _len13; _key13++) {\n      args[_key13] = arguments[_key13];\n    }\n\n    var extensions = Hoek.flatten(args);\n    Hoek.assert(extensions.length > 0, 'You need to provide at least one extension');\n    this.assert(extensions, root.extensionsSchema);\n    var joi = Object.create(this.any());\n    Object.assign(joi, this);\n    joi._currentJoi = joi;\n    joi._binds = new Set(joi._binds);\n\n    var _loop = function _loop(i) {\n      var extension = extensions[i];\n\n      if (typeof extension === 'function') {\n        extension = extension(joi);\n      }\n\n      _this2.assert(extension, root.extensionSchema);\n\n      var base = (extension.base || _this2.any()).clone(); // Cloning because we're going to override language afterwards\n\n\n      var ctor = base.constructor;\n\n      var type = /*#__PURE__*/function (_ctor) {\n        _inherits(type, _ctor);\n\n        var _super = _createSuper(type);\n\n        // eslint-disable-line no-loop-func\n        function type() {\n          var _this3;\n\n          _classCallCheck(this, type);\n\n          _this3 = _super.call(this);\n\n          if (extension.base) {\n            Object.assign(_assertThisInitialized(_this3), base);\n          }\n\n          _this3._type = extension.name;\n          return _this3;\n        }\n\n        return type;\n      }(ctor);\n\n      if (extension.language) {\n        var lang = _defineProperty({}, extension.name, extension.language);\n\n        type.prototype._language = Hoek.applyToDefaults(type.prototype._language || base._settings && base._settings.language || {}, lang);\n      }\n\n      if (extension.coerce) {\n        type.prototype._coerce = function (value, state, options) {\n          if (ctor.prototype._coerce) {\n            var baseRet = ctor.prototype._coerce.call(this, value, state, options);\n\n            if (baseRet.errors) {\n              return baseRet;\n            }\n\n            value = baseRet.value;\n          }\n\n          var ret = extension.coerce.call(this, value, state, options);\n\n          if (ret instanceof Errors.Err) {\n            return {\n              value: value,\n              errors: ret\n            };\n          }\n\n          return {\n            value: ret\n          };\n        };\n      }\n\n      if (extension.pre) {\n        type.prototype._base = function (value, state, options) {\n          if (ctor.prototype._base) {\n            var baseRet = ctor.prototype._base.call(this, value, state, options);\n\n            if (baseRet.errors) {\n              return baseRet;\n            }\n\n            value = baseRet.value;\n          }\n\n          var ret = extension.pre.call(this, value, state, options);\n\n          if (ret instanceof Errors.Err) {\n            return {\n              value: value,\n              errors: ret\n            };\n          }\n\n          return {\n            value: ret\n          };\n        };\n      }\n\n      if (extension.rules) {\n        var _loop2 = function _loop2(j) {\n          var rule = extension.rules[j];\n          var ruleArgs = rule.params ? rule.params instanceof Any ? rule.params._inner.children.map(function (k) {\n            return k.key;\n          }) : Object.keys(rule.params) : [];\n          var validateArgs = rule.params ? Cast.schema(_this2, rule.params) : null;\n\n          type.prototype[rule.name] = function () {\n            for (var _len14 = arguments.length, rArgs = new Array(_len14), _key14 = 0; _key14 < _len14; _key14++) {\n              rArgs[_key14] = arguments[_key14];\n            }\n\n            // eslint-disable-line no-loop-func\n            if (rArgs.length > ruleArgs.length) {\n              throw new Error('Unexpected number of arguments');\n            }\n\n            var hasRef = false;\n            var arg = {};\n\n            for (var k = 0; k < ruleArgs.length; ++k) {\n              arg[ruleArgs[k]] = rArgs[k];\n\n              if (!hasRef && Ref.isRef(rArgs[k])) {\n                hasRef = true;\n              }\n            }\n\n            if (validateArgs) {\n              arg = joi.attempt(arg, validateArgs);\n            }\n\n            var schema;\n\n            if (rule.validate && !rule.setup) {\n              var validate = function validate(value, state, options) {\n                return rule.validate.call(this, arg, value, state, options);\n              };\n\n              schema = this._test(rule.name, arg, validate, {\n                description: rule.description,\n                hasRef: hasRef\n              });\n            } else {\n              schema = this.clone();\n            }\n\n            if (rule.setup) {\n              var newSchema = rule.setup.call(schema, arg);\n\n              if (newSchema !== undefined) {\n                Hoek.assert(newSchema instanceof Any, \"Setup of extension Joi.\".concat(this._type, \"().\").concat(rule.name, \"() must return undefined or a Joi object\"));\n                schema = newSchema;\n              }\n\n              if (rule.validate) {\n                var _validate = function _validate(value, state, options) {\n                  return rule.validate.call(this, arg, value, state, options);\n                };\n\n                schema = schema._test(rule.name, arg, _validate, {\n                  description: rule.description,\n                  hasRef: hasRef\n                });\n              }\n            }\n\n            return schema;\n          };\n        };\n\n        for (var j = 0; j < extension.rules.length; ++j) {\n          _loop2(j);\n        }\n      }\n\n      if (extension.describe) {\n        type.prototype.describe = function () {\n          var description = ctor.prototype.describe.call(this);\n          return extension.describe.call(this, description);\n        };\n      }\n\n      var instance = new type();\n\n      joi[extension.name] = function () {\n        for (var _len15 = arguments.length, extArgs = new Array(_len15), _key15 = 0; _key15 < _len15; _key15++) {\n          extArgs[_key15] = arguments[_key15];\n        }\n\n        return internals.callWithDefaults.call(this, instance, extArgs);\n      };\n\n      joi._binds.add(extension.name);\n    };\n\n    for (var i = 0; i < extensions.length; ++i) {\n      _loop(i);\n    }\n\n    return joi;\n  };\n\n  root.extensionSchema = internals.object.keys({\n    base: internals.object.type(Any, 'Joi object'),\n    name: internals.string.required(),\n    coerce: internals.func.arity(3),\n    pre: internals.func.arity(3),\n    language: internals.object,\n    describe: internals.func.arity(1),\n    rules: internals.array.items(internals.object.keys({\n      name: internals.string.required(),\n      setup: internals.func.arity(1),\n      validate: internals.func.arity(4),\n      params: [internals.object.pattern(/.*/, internals.object.type(Any, 'Joi object')), internals.object.type(internals.object.constructor, 'Joi object')],\n      description: [internals.string, internals.func.arity(1)]\n    }).or('setup', 'validate'))\n  }).strict();\n  root.extensionsSchema = internals.array.items([internals.object, internals.func.arity(1)]).strict();\n  root.version = require('../package.json').version;\n  return root;\n};\n\nmodule.exports = internals.root();","map":{"version":3,"sources":["/home/agatha/open/node_modules/@hapi/joi/lib/index.js"],"names":["Hoek","require","Any","Cast","Errors","Lazy","Ref","internals","alternatives","array","boolean","binary","date","func","number","object","string","symbol","callWithDefaults","schema","args","assert","_defaults","_currentJoi","_init","root","any","clone","prototype","_binds","Set","length","call","alt","bool","ref","create","isRef","validate","value","last","callback","count","options","undefined","compile","_validateWithOptions","describe","err","hasOwnProperty","message","path","attempt","result","error","annotate","Error","reach","Array","isArray","sourceSchema","schemaPath","children","_inner","key","shift","i","child","split","slice","lazy","defaults","fn","joi","Object","constructor","assign","bind","forEach","extend","extensions","flatten","extensionsSchema","extension","extensionSchema","base","ctor","type","_type","name","language","lang","_language","applyToDefaults","_settings","coerce","_coerce","state","baseRet","errors","ret","Err","pre","_base","rules","j","rule","ruleArgs","params","map","k","keys","validateArgs","rArgs","hasRef","arg","setup","_test","description","newSchema","instance","extArgs","add","required","arity","items","pattern","or","strict","version","module","exports"],"mappings":"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","sourcesContent":["'use strict';\n\nconst Hoek = require('@hapi/hoek');\n\nconst Any = require('./types/any');\nconst Cast = require('./cast');\nconst Errors = require('./errors');\nconst Lazy = require('./types/lazy');\nconst Ref = require('./ref');\n\n\nconst internals = {\n    alternatives: require('./types/alternatives'),\n    array: require('./types/array'),\n    boolean: require('./types/boolean'),\n    binary: require('./types/binary'),\n    date: require('./types/date'),\n    func: require('./types/func'),\n    number: require('./types/number'),\n    object: require('./types/object'),\n    string: require('./types/string'),\n    symbol: require('./types/symbol')\n};\n\n\ninternals.callWithDefaults = function (schema, args) {\n\n    Hoek.assert(this, 'Must be invoked on a Joi instance.');\n\n    if (this._defaults) {\n        schema = this._defaults(schema);\n    }\n\n    schema._currentJoi = this;\n\n    return schema._init(...args);\n};\n\n\ninternals.root = function () {\n\n    const any = new Any();\n\n    const root = any.clone();\n    Any.prototype._currentJoi = root;\n    root._currentJoi = root;\n    root._binds = new Set(['any', 'alternatives', 'alt', 'array', 'bool', 'boolean', 'binary', 'date', 'func', 'number', 'object', 'string', 'symbol', 'validate', 'describe', 'compile', 'assert', 'attempt', 'lazy', 'defaults', 'extend', 'allow', 'valid', 'only', 'equal', 'invalid', 'disallow', 'not', 'required', 'exist', 'optional', 'forbidden', 'strip', 'when', 'empty', 'default']);\n\n    root.any = function (...args) {\n\n        Hoek.assert(args.length === 0, 'Joi.any() does not allow arguments.');\n\n        return internals.callWithDefaults.call(this, any, args);\n    };\n\n    root.alternatives = root.alt = function (...args) {\n\n        return internals.callWithDefaults.call(this, internals.alternatives, args);\n    };\n\n    root.array = function (...args) {\n\n        Hoek.assert(args.length === 0, 'Joi.array() does not allow arguments.');\n\n        return internals.callWithDefaults.call(this, internals.array, args);\n    };\n\n    root.boolean = root.bool = function (...args) {\n\n        Hoek.assert(args.length === 0, 'Joi.boolean() does not allow arguments.');\n\n        return internals.callWithDefaults.call(this, internals.boolean, args);\n    };\n\n    root.binary = function (...args) {\n\n        Hoek.assert(args.length === 0, 'Joi.binary() does not allow arguments.');\n\n        return internals.callWithDefaults.call(this, internals.binary, args);\n    };\n\n    root.date = function (...args) {\n\n        Hoek.assert(args.length === 0, 'Joi.date() does not allow arguments.');\n\n        return internals.callWithDefaults.call(this, internals.date, args);\n    };\n\n    root.func = function (...args) {\n\n        Hoek.assert(args.length === 0, 'Joi.func() does not allow arguments.');\n\n        return internals.callWithDefaults.call(this, internals.func, args);\n    };\n\n    root.number = function (...args) {\n\n        Hoek.assert(args.length === 0, 'Joi.number() does not allow arguments.');\n\n        return internals.callWithDefaults.call(this, internals.number, args);\n    };\n\n    root.object = function (...args) {\n\n        return internals.callWithDefaults.call(this, internals.object, args);\n    };\n\n    root.string = function (...args) {\n\n        Hoek.assert(args.length === 0, 'Joi.string() does not allow arguments.');\n\n        return internals.callWithDefaults.call(this, internals.string, args);\n    };\n\n    root.symbol = function (...args) {\n\n        Hoek.assert(args.length === 0, 'Joi.symbol() does not allow arguments.');\n\n        return internals.callWithDefaults.call(this, internals.symbol, args);\n    };\n\n    root.ref = function (...args) {\n\n        return Ref.create(...args);\n    };\n\n    root.isRef = function (ref) {\n\n        return Ref.isRef(ref);\n    };\n\n    root.validate = function (value, ...args /*, [schema], [options], callback */) {\n\n        const last = args[args.length - 1];\n        const callback = typeof last === 'function' ? last : null;\n\n        const count = args.length - (callback ? 1 : 0);\n        if (count === 0) {\n            return any.validate(value, callback);\n        }\n\n        const options = count === 2 ? args[1] : undefined;\n        const schema = this.compile(args[0]);\n\n        return schema._validateWithOptions(value, options, callback);\n    };\n\n    root.describe = function (...args) {\n\n        const schema = args.length ? this.compile(args[0]) : any;\n        return schema.describe();\n    };\n\n    root.compile = function (schema) {\n\n        try {\n            return Cast.schema(this, schema);\n        }\n        catch (err) {\n            if (err.hasOwnProperty('path')) {\n                err.message = err.message + '(' + err.path + ')';\n            }\n\n            throw err;\n        }\n    };\n\n    root.assert = function (value, schema, message) {\n\n        this.attempt(value, schema, message);\n    };\n\n    root.attempt = function (value, schema, message) {\n\n        const result = this.validate(value, schema);\n        const error = result.error;\n        if (error) {\n            if (!message) {\n                if (typeof error.annotate === 'function') {\n                    error.message = error.annotate();\n                }\n\n                throw error;\n            }\n\n            if (!(message instanceof Error)) {\n                if (typeof error.annotate === 'function') {\n                    error.message = `${message} ${error.annotate()}`;\n                }\n\n                throw error;\n            }\n\n            throw message;\n        }\n\n        return result.value;\n    };\n\n    root.reach = function (schema, path) {\n\n        Hoek.assert(schema && schema instanceof Any, 'you must provide a joi schema');\n        Hoek.assert(Array.isArray(path) || typeof path === 'string', 'path must be a string or an array of strings');\n\n        const reach = (sourceSchema, schemaPath) => {\n\n            if (!schemaPath.length) {\n                return sourceSchema;\n            }\n\n            const children = sourceSchema._inner.children;\n            if (!children) {\n                return;\n            }\n\n            const key = schemaPath.shift();\n            for (let i = 0; i < children.length; ++i) {\n                const child = children[i];\n                if (child.key === key) {\n                    return reach(child.schema, schemaPath);\n                }\n            }\n        };\n\n        const schemaPath = typeof path === 'string' ? (path ? path.split('.') : []) : path.slice();\n\n        return reach(schema, schemaPath);\n    };\n\n    root.lazy = function (...args) {\n\n        return internals.callWithDefaults.call(this, Lazy, args);\n    };\n\n    root.defaults = function (fn) {\n\n        Hoek.assert(typeof fn === 'function', 'Defaults must be a function');\n\n        let joi = Object.create(this.any());\n        joi = fn(joi);\n\n        Hoek.assert(joi && joi instanceof this.constructor, 'defaults() must return a schema');\n\n        Object.assign(joi, this, joi.clone()); // Re-add the types from `this` but also keep the settings from joi's potential new defaults\n\n        joi._defaults = (schema) => {\n\n            if (this._defaults) {\n                schema = this._defaults(schema);\n                Hoek.assert(schema instanceof this.constructor, 'defaults() must return a schema');\n            }\n\n            schema = fn(schema);\n            Hoek.assert(schema instanceof this.constructor, 'defaults() must return a schema');\n            return schema;\n        };\n\n        return joi;\n    };\n\n    root.bind = function () {\n\n        const joi = Object.create(this);\n\n        joi._binds.forEach((bind) => {\n\n            joi[bind] = joi[bind].bind(joi);\n        });\n\n        return joi;\n    };\n\n    root.extend = function (...args) {\n\n        const extensions = Hoek.flatten(args);\n        Hoek.assert(extensions.length > 0, 'You need to provide at least one extension');\n\n        this.assert(extensions, root.extensionsSchema);\n\n        const joi = Object.create(this.any());\n        Object.assign(joi, this);\n        joi._currentJoi = joi;\n        joi._binds = new Set(joi._binds);\n\n        for (let i = 0; i < extensions.length; ++i) {\n            let extension = extensions[i];\n\n            if (typeof extension === 'function') {\n                extension = extension(joi);\n            }\n\n            this.assert(extension, root.extensionSchema);\n\n            const base = (extension.base || this.any()).clone(); // Cloning because we're going to override language afterwards\n            const ctor = base.constructor;\n            const type = class extends ctor { // eslint-disable-line no-loop-func\n\n                constructor() {\n\n                    super();\n                    if (extension.base) {\n                        Object.assign(this, base);\n                    }\n\n                    this._type = extension.name;\n                }\n\n            };\n\n            if (extension.language) {\n                const lang = {\n                    [extension.name]: extension.language\n                };\n                type.prototype._language = Hoek.applyToDefaults(type.prototype._language || (base._settings && base._settings.language) || {}, lang);\n            }\n\n\n            if (extension.coerce) {\n                type.prototype._coerce = function (value, state, options) {\n\n                    if (ctor.prototype._coerce) {\n                        const baseRet = ctor.prototype._coerce.call(this, value, state, options);\n\n                        if (baseRet.errors) {\n                            return baseRet;\n                        }\n\n                        value = baseRet.value;\n                    }\n\n                    const ret = extension.coerce.call(this, value, state, options);\n                    if (ret instanceof Errors.Err) {\n                        return { value, errors: ret };\n                    }\n\n                    return { value: ret };\n                };\n            }\n\n            if (extension.pre) {\n                type.prototype._base = function (value, state, options) {\n\n                    if (ctor.prototype._base) {\n                        const baseRet = ctor.prototype._base.call(this, value, state, options);\n\n                        if (baseRet.errors) {\n                            return baseRet;\n                        }\n\n                        value = baseRet.value;\n                    }\n\n                    const ret = extension.pre.call(this, value, state, options);\n                    if (ret instanceof Errors.Err) {\n                        return { value, errors: ret };\n                    }\n\n                    return { value: ret };\n                };\n            }\n\n            if (extension.rules) {\n                for (let j = 0; j < extension.rules.length; ++j) {\n                    const rule = extension.rules[j];\n                    const ruleArgs = rule.params ?\n                        (rule.params instanceof Any ? rule.params._inner.children.map((k) => k.key) : Object.keys(rule.params)) :\n                        [];\n                    const validateArgs = rule.params ? Cast.schema(this, rule.params) : null;\n\n                    type.prototype[rule.name] = function (...rArgs) { // eslint-disable-line no-loop-func\n\n                        if (rArgs.length > ruleArgs.length) {\n                            throw new Error('Unexpected number of arguments');\n                        }\n\n                        let hasRef = false;\n                        let arg = {};\n\n                        for (let k = 0; k < ruleArgs.length; ++k) {\n                            arg[ruleArgs[k]] = rArgs[k];\n                            if (!hasRef && Ref.isRef(rArgs[k])) {\n                                hasRef = true;\n                            }\n                        }\n\n                        if (validateArgs) {\n                            arg = joi.attempt(arg, validateArgs);\n                        }\n\n                        let schema;\n                        if (rule.validate && !rule.setup) {\n                            const validate = function (value, state, options) {\n\n                                return rule.validate.call(this, arg, value, state, options);\n                            };\n\n                            schema = this._test(rule.name, arg, validate, {\n                                description: rule.description,\n                                hasRef\n                            });\n                        }\n                        else {\n                            schema = this.clone();\n                        }\n\n                        if (rule.setup) {\n                            const newSchema = rule.setup.call(schema, arg);\n                            if (newSchema !== undefined) {\n                                Hoek.assert(newSchema instanceof Any, `Setup of extension Joi.${this._type}().${rule.name}() must return undefined or a Joi object`);\n                                schema = newSchema;\n                            }\n\n                            if (rule.validate) {\n                                const validate = function (value, state, options) {\n\n                                    return rule.validate.call(this, arg, value, state, options);\n                                };\n\n                                schema = schema._test(rule.name, arg, validate, {\n                                    description: rule.description,\n                                    hasRef\n                                });\n                            }\n                        }\n\n                        return schema;\n                    };\n                }\n            }\n\n            if (extension.describe) {\n                type.prototype.describe = function () {\n\n                    const description = ctor.prototype.describe.call(this);\n                    return extension.describe.call(this, description);\n                };\n            }\n\n            const instance = new type();\n            joi[extension.name] = function (...extArgs) {\n\n                return internals.callWithDefaults.call(this, instance, extArgs);\n            };\n\n            joi._binds.add(extension.name);\n        }\n\n        return joi;\n    };\n\n    root.extensionSchema = internals.object.keys({\n        base: internals.object.type(Any, 'Joi object'),\n        name: internals.string.required(),\n        coerce: internals.func.arity(3),\n        pre: internals.func.arity(3),\n        language: internals.object,\n        describe: internals.func.arity(1),\n        rules: internals.array.items(internals.object.keys({\n            name: internals.string.required(),\n            setup: internals.func.arity(1),\n            validate: internals.func.arity(4),\n            params: [\n                internals.object.pattern(/.*/, internals.object.type(Any, 'Joi object')),\n                internals.object.type(internals.object.constructor, 'Joi object')\n            ],\n            description: [internals.string, internals.func.arity(1)]\n        }).or('setup', 'validate'))\n    }).strict();\n\n    root.extensionsSchema = internals.array.items([internals.object, internals.func.arity(1)]).strict();\n\n    root.version = require('../package.json').version;\n\n    return root;\n};\n\n\nmodule.exports = internals.root();\n"]},"metadata":{},"sourceType":"script"}