{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.enableFeature = enableFeature;\nexports.isLoose = isLoose;\nexports.verifyUsedFeatures = verifyUsedFeatures;\nexports.FEATURES = void 0;\n\nvar _decorators = require(\"./decorators\");\n\nconst FEATURES = Object.freeze({\n  fields: 1 << 1,\n  privateMethods: 1 << 2,\n  decorators: 1 << 3,\n  privateIn: 1 << 4\n});\nexports.FEATURES = FEATURES;\nconst featuresSameLoose = new Map([[FEATURES.fields, \"@babel/plugin-proposal-class-properties\"], [FEATURES.privateMethods, \"@babel/plugin-proposal-private-methods\"], [FEATURES.privateIn, \"@babel/plugin-proposal-private-private-property-in-object\"]]);\nconst featuresKey = \"@babel/plugin-class-features/featuresKey\";\nconst looseKey = \"@babel/plugin-class-features/looseKey\";\nconst looseLowPriorityKey = \"@babel/plugin-class-features/looseLowPriorityKey/#__internal__@babel/preset-env__please-overwrite-loose-instead-of-throwing\";\n\nfunction enableFeature(file, feature, loose) {\n  if (!hasFeature(file, feature) || canIgnoreLoose(file, feature)) {\n    file.set(featuresKey, file.get(featuresKey) | feature);\n\n    if (loose === \"#__internal__@babel/preset-env__prefer-true-but-false-is-ok-if-it-prevents-an-error\") {\n      setLoose(file, feature, true);\n      file.set(looseLowPriorityKey, file.get(looseLowPriorityKey) | feature);\n    } else if (loose === \"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\") {\n      setLoose(file, feature, false);\n      file.set(looseLowPriorityKey, file.get(looseLowPriorityKey) | feature);\n    } else {\n      setLoose(file, feature, loose);\n    }\n  }\n\n  let resolvedLoose;\n  let higherPriorityPluginName;\n\n  for (const [mask, name] of featuresSameLoose) {\n    if (!hasFeature(file, mask)) continue;\n    const loose = isLoose(file, mask);\n\n    if (canIgnoreLoose(file, mask)) {\n      continue;\n    } else if (resolvedLoose === !loose) {\n      throw new Error(\"'loose' mode configuration must be the same for @babel/plugin-proposal-class-properties, \" + \"@babel/plugin-proposal-private-methods and \" + \"@babel/plugin-proposal-private-property-in-object (when they are enabled).\");\n    } else {\n      resolvedLoose = loose;\n      higherPriorityPluginName = name;\n    }\n  }\n\n  if (resolvedLoose !== undefined) {\n    for (const [mask, name] of featuresSameLoose) {\n      if (hasFeature(file, mask) && isLoose(file, mask) !== resolvedLoose) {\n        setLoose(file, mask, resolvedLoose);\n        console.warn(`Though the \"loose\" option was set to \"${!resolvedLoose}\" in your @babel/preset-env ` + `config, it will not be used for ${name} since the \"loose\" mode option was set to ` + `\"${resolvedLoose}\" for ${higherPriorityPluginName}.\\nThe \"loose\" option must be the ` + `same for @babel/plugin-proposal-class-properties, @babel/plugin-proposal-private-methods ` + `and @babel/plugin-proposal-private-property-in-object (when they are enabled): you can ` + `silence this warning by explicitly adding\\n` + `\\t[\"${name}\", { \"loose\": ${resolvedLoose} }]\\n` + `to the \"plugins\" section of your Babel config.`);\n      }\n    }\n  }\n}\n\nfunction hasFeature(file, feature) {\n  return !!(file.get(featuresKey) & feature);\n}\n\nfunction isLoose(file, feature) {\n  return !!(file.get(looseKey) & feature);\n}\n\nfunction setLoose(file, feature, loose) {\n  if (loose) file.set(looseKey, file.get(looseKey) | feature);else file.set(looseKey, file.get(looseKey) & ~feature);\n  file.set(looseLowPriorityKey, file.get(looseLowPriorityKey) & ~feature);\n}\n\nfunction canIgnoreLoose(file, feature) {\n  return !!(file.get(looseLowPriorityKey) & feature);\n}\n\nfunction verifyUsedFeatures(path, file) {\n  if ((0, _decorators.hasOwnDecorators)(path.node)) {\n    if (!hasFeature(file, FEATURES.decorators)) {\n      throw path.buildCodeFrameError(\"Decorators are not enabled.\" + \"\\nIf you are using \" + '[\"@babel/plugin-proposal-decorators\", { \"legacy\": true }], ' + 'make sure it comes *before* \"@babel/plugin-proposal-class-properties\" ' + \"and enable loose mode, like so:\\n\" + '\\t[\"@babel/plugin-proposal-decorators\", { \"legacy\": true }]\\n' + '\\t[\"@babel/plugin-proposal-class-properties\", { \"loose\": true }]');\n    }\n\n    if (path.isPrivate()) {\n      throw path.buildCodeFrameError(`Private ${path.isClassMethod() ? \"methods\" : \"fields\"} in decorated classes are not supported yet.`);\n    }\n  }\n\n  if (path.isPrivate() && path.isMethod()) {\n    if (!hasFeature(file, FEATURES.privateMethods)) {\n      throw path.buildCodeFrameError(\"Class private methods are not enabled.\");\n    }\n  }\n\n  if (path.isPrivateName() && path.parentPath.isBinaryExpression({\n    operator: \"in\",\n    left: path.node\n  })) {\n    if (!hasFeature(file, FEATURES.privateIn)) {\n      throw path.buildCodeFrameError(\"Private property in checks are not enabled.\");\n    }\n  }\n\n  if (path.isProperty()) {\n    if (!hasFeature(file, FEATURES.fields)) {\n      throw path.buildCodeFrameError(\"Class fields are not enabled.\");\n    }\n  }\n}","map":{"version":3,"sources":["/home/agatha/open/node_modules/@babel/helper-create-class-features-plugin/lib/features.js"],"names":["Object","defineProperty","exports","value","enableFeature","isLoose","verifyUsedFeatures","FEATURES","_decorators","require","freeze","fields","privateMethods","decorators","privateIn","featuresSameLoose","Map","featuresKey","looseKey","looseLowPriorityKey","file","feature","loose","hasFeature","canIgnoreLoose","set","get","setLoose","resolvedLoose","higherPriorityPluginName","mask","name","Error","undefined","console","warn","path","hasOwnDecorators","node","buildCodeFrameError","isPrivate","isClassMethod","isMethod","isPrivateName","parentPath","isBinaryExpression","operator","left","isProperty"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.enableFeature = enableFeature;\nexports.isLoose = isLoose;\nexports.verifyUsedFeatures = verifyUsedFeatures;\nexports.FEATURES = void 0;\n\nvar _decorators = require(\"./decorators\");\n\nconst FEATURES = Object.freeze({\n  fields: 1 << 1,\n  privateMethods: 1 << 2,\n  decorators: 1 << 3,\n  privateIn: 1 << 4\n});\nexports.FEATURES = FEATURES;\nconst featuresSameLoose = new Map([[FEATURES.fields, \"@babel/plugin-proposal-class-properties\"], [FEATURES.privateMethods, \"@babel/plugin-proposal-private-methods\"], [FEATURES.privateIn, \"@babel/plugin-proposal-private-private-property-in-object\"]]);\nconst featuresKey = \"@babel/plugin-class-features/featuresKey\";\nconst looseKey = \"@babel/plugin-class-features/looseKey\";\nconst looseLowPriorityKey = \"@babel/plugin-class-features/looseLowPriorityKey/#__internal__@babel/preset-env__please-overwrite-loose-instead-of-throwing\";\n\nfunction enableFeature(file, feature, loose) {\n  if (!hasFeature(file, feature) || canIgnoreLoose(file, feature)) {\n    file.set(featuresKey, file.get(featuresKey) | feature);\n\n    if (loose === \"#__internal__@babel/preset-env__prefer-true-but-false-is-ok-if-it-prevents-an-error\") {\n      setLoose(file, feature, true);\n      file.set(looseLowPriorityKey, file.get(looseLowPriorityKey) | feature);\n    } else if (loose === \"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\") {\n      setLoose(file, feature, false);\n      file.set(looseLowPriorityKey, file.get(looseLowPriorityKey) | feature);\n    } else {\n      setLoose(file, feature, loose);\n    }\n  }\n\n  let resolvedLoose;\n  let higherPriorityPluginName;\n\n  for (const [mask, name] of featuresSameLoose) {\n    if (!hasFeature(file, mask)) continue;\n    const loose = isLoose(file, mask);\n\n    if (canIgnoreLoose(file, mask)) {\n      continue;\n    } else if (resolvedLoose === !loose) {\n      throw new Error(\"'loose' mode configuration must be the same for @babel/plugin-proposal-class-properties, \" + \"@babel/plugin-proposal-private-methods and \" + \"@babel/plugin-proposal-private-property-in-object (when they are enabled).\");\n    } else {\n      resolvedLoose = loose;\n      higherPriorityPluginName = name;\n    }\n  }\n\n  if (resolvedLoose !== undefined) {\n    for (const [mask, name] of featuresSameLoose) {\n      if (hasFeature(file, mask) && isLoose(file, mask) !== resolvedLoose) {\n        setLoose(file, mask, resolvedLoose);\n        console.warn(`Though the \"loose\" option was set to \"${!resolvedLoose}\" in your @babel/preset-env ` + `config, it will not be used for ${name} since the \"loose\" mode option was set to ` + `\"${resolvedLoose}\" for ${higherPriorityPluginName}.\\nThe \"loose\" option must be the ` + `same for @babel/plugin-proposal-class-properties, @babel/plugin-proposal-private-methods ` + `and @babel/plugin-proposal-private-property-in-object (when they are enabled): you can ` + `silence this warning by explicitly adding\\n` + `\\t[\"${name}\", { \"loose\": ${resolvedLoose} }]\\n` + `to the \"plugins\" section of your Babel config.`);\n      }\n    }\n  }\n}\n\nfunction hasFeature(file, feature) {\n  return !!(file.get(featuresKey) & feature);\n}\n\nfunction isLoose(file, feature) {\n  return !!(file.get(looseKey) & feature);\n}\n\nfunction setLoose(file, feature, loose) {\n  if (loose) file.set(looseKey, file.get(looseKey) | feature);else file.set(looseKey, file.get(looseKey) & ~feature);\n  file.set(looseLowPriorityKey, file.get(looseLowPriorityKey) & ~feature);\n}\n\nfunction canIgnoreLoose(file, feature) {\n  return !!(file.get(looseLowPriorityKey) & feature);\n}\n\nfunction verifyUsedFeatures(path, file) {\n  if ((0, _decorators.hasOwnDecorators)(path.node)) {\n    if (!hasFeature(file, FEATURES.decorators)) {\n      throw path.buildCodeFrameError(\"Decorators are not enabled.\" + \"\\nIf you are using \" + '[\"@babel/plugin-proposal-decorators\", { \"legacy\": true }], ' + 'make sure it comes *before* \"@babel/plugin-proposal-class-properties\" ' + \"and enable loose mode, like so:\\n\" + '\\t[\"@babel/plugin-proposal-decorators\", { \"legacy\": true }]\\n' + '\\t[\"@babel/plugin-proposal-class-properties\", { \"loose\": true }]');\n    }\n\n    if (path.isPrivate()) {\n      throw path.buildCodeFrameError(`Private ${path.isClassMethod() ? \"methods\" : \"fields\"} in decorated classes are not supported yet.`);\n    }\n  }\n\n  if (path.isPrivate() && path.isMethod()) {\n    if (!hasFeature(file, FEATURES.privateMethods)) {\n      throw path.buildCodeFrameError(\"Class private methods are not enabled.\");\n    }\n  }\n\n  if (path.isPrivateName() && path.parentPath.isBinaryExpression({\n    operator: \"in\",\n    left: path.node\n  })) {\n    if (!hasFeature(file, FEATURES.privateIn)) {\n      throw path.buildCodeFrameError(\"Private property in checks are not enabled.\");\n    }\n  }\n\n  if (path.isProperty()) {\n    if (!hasFeature(file, FEATURES.fields)) {\n      throw path.buildCodeFrameError(\"Class fields are not enabled.\");\n    }\n  }\n}"]},"metadata":{},"sourceType":"script"}