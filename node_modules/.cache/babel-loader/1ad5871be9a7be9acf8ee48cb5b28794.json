{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isBrowsersQueryValid = isBrowsersQueryValid;\nexports.default = getTargets;\nObject.defineProperty(exports, \"unreleasedLabels\", {\n  enumerable: true,\n  get: function () {\n    return _targets.unreleasedLabels;\n  }\n});\nObject.defineProperty(exports, \"prettifyTargets\", {\n  enumerable: true,\n  get: function () {\n    return _pretty.prettifyTargets;\n  }\n});\nObject.defineProperty(exports, \"getInclusionReasons\", {\n  enumerable: true,\n  get: function () {\n    return _debug.getInclusionReasons;\n  }\n});\nObject.defineProperty(exports, \"filterItems\", {\n  enumerable: true,\n  get: function () {\n    return _filterItems.default;\n  }\n});\nObject.defineProperty(exports, \"isRequired\", {\n  enumerable: true,\n  get: function () {\n    return _filterItems.isRequired;\n  }\n});\n\nvar _browserslist = _interopRequireDefault(require(\"browserslist\"));\n\nvar _levenary = _interopRequireDefault(require(\"levenary\"));\n\nvar _invariant = _interopRequireDefault(require(\"invariant\"));\n\nvar _nativeModules = _interopRequireDefault(require(\"@babel/compat-data/native-modules\"));\n\nvar _utils = require(\"./utils\");\n\nvar _targets = require(\"./targets\");\n\nvar _options = require(\"./options\");\n\nvar _pretty = require(\"./pretty\");\n\nvar _debug = require(\"./debug\");\n\nvar _filterItems = _interopRequireWildcard(require(\"./filter-items\"));\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function () {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nconst browserslistDefaults = _browserslist.default.defaults;\nconst validBrowserslistTargets = [...Object.keys(_browserslist.default.data), ...Object.keys(_browserslist.default.aliases)];\n\nfunction objectToBrowserslist(object) {\n  return Object.keys(object).reduce((list, targetName) => {\n    if (validBrowserslistTargets.indexOf(targetName) >= 0) {\n      const targetVersion = object[targetName];\n      return list.concat(`${targetName} ${targetVersion}`);\n    }\n\n    return list;\n  }, []);\n}\n\nfunction validateTargetNames(targets) {\n  const validTargets = Object.keys(_options.TargetNames);\n\n  for (const target in targets) {\n    if (!_options.TargetNames[target]) {\n      throw new Error(`Invalid Option: '${target}' is not a valid target\n        Maybe you meant to use '${(0, _levenary.default)(target, validTargets)}'?`);\n    }\n  }\n\n  return targets;\n}\n\nfunction isBrowsersQueryValid(browsers) {\n  return typeof browsers === \"string\" || Array.isArray(browsers);\n}\n\nfunction validateBrowsers(browsers) {\n  (0, _invariant.default)(typeof browsers === \"undefined\" || isBrowsersQueryValid(browsers), `Invalid Option: '${String(browsers)}' is not a valid browserslist query`);\n  return browsers;\n}\n\nfunction getLowestVersions(browsers) {\n  return browsers.reduce((all, browser) => {\n    const [browserName, browserVersion] = browser.split(\" \");\n    const normalizedBrowserName = _targets.browserNameMap[browserName];\n\n    if (!normalizedBrowserName) {\n      return all;\n    }\n\n    try {\n      const splitVersion = browserVersion.split(\"-\")[0].toLowerCase();\n      const isSplitUnreleased = (0, _utils.isUnreleasedVersion)(splitVersion, browserName);\n\n      if (!all[normalizedBrowserName]) {\n        all[normalizedBrowserName] = isSplitUnreleased ? splitVersion : (0, _utils.semverify)(splitVersion);\n        return all;\n      }\n\n      const version = all[normalizedBrowserName];\n      const isUnreleased = (0, _utils.isUnreleasedVersion)(version, browserName);\n\n      if (isUnreleased && isSplitUnreleased) {\n        all[normalizedBrowserName] = (0, _utils.getLowestUnreleased)(version, splitVersion, browserName);\n      } else if (isUnreleased) {\n        all[normalizedBrowserName] = (0, _utils.semverify)(splitVersion);\n      } else if (!isUnreleased && !isSplitUnreleased) {\n        const parsedBrowserVersion = (0, _utils.semverify)(splitVersion);\n        all[normalizedBrowserName] = (0, _utils.semverMin)(version, parsedBrowserVersion);\n      }\n    } catch (e) {}\n\n    return all;\n  }, {});\n}\n\nfunction outputDecimalWarning(decimalTargets) {\n  if (!(decimalTargets == null ? void 0 : decimalTargets.length)) {\n    return;\n  }\n\n  console.log(\"Warning, the following targets are using a decimal version:\");\n  console.log(\"\");\n  decimalTargets.forEach(({\n    target,\n    value\n  }) => console.log(`  ${target}: ${value}`));\n  console.log(\"\");\n  console.log(\"We recommend using a string for minor/patch versions to avoid numbers like 6.10\");\n  console.log(\"getting parsed as 6.1, which can lead to unexpected behavior.\");\n  console.log(\"\");\n}\n\nfunction semverifyTarget(target, value) {\n  try {\n    return (0, _utils.semverify)(value);\n  } catch (error) {\n    throw new Error(`Invalid Option: '${value}' is not a valid value for 'targets.${target}'.`);\n  }\n}\n\nconst targetParserMap = {\n  __default(target, value) {\n    const version = (0, _utils.isUnreleasedVersion)(value, target) ? value.toLowerCase() : semverifyTarget(target, value);\n    return [target, version];\n  },\n\n  node(target, value) {\n    const parsed = value === true || value === \"current\" ? process.versions.node : semverifyTarget(target, value);\n    return [target, parsed];\n  }\n\n};\n\nfunction getTargets(inputTargets = {}, options = {}) {\n  const targetOpts = {};\n  let {\n    browsers\n  } = inputTargets;\n\n  if (inputTargets.esmodules) {\n    const supportsESModules = _nativeModules.default[\"es6.module\"];\n    browsers = Object.keys(supportsESModules).map(browser => `${browser} ${supportsESModules[browser]}`).join(\", \");\n  }\n\n  const browsersquery = validateBrowsers(browsers);\n  const input = Object.assign({}, inputTargets);\n  delete input.esmodules;\n  delete input.browsers;\n  let targets = validateTargetNames(input);\n  const shouldParseBrowsers = !!browsersquery;\n  const hasTargets = shouldParseBrowsers || Object.keys(targets).length > 0;\n  const shouldSearchForConfig = !options.ignoreBrowserslistConfig && !hasTargets;\n\n  if (shouldParseBrowsers || shouldSearchForConfig) {\n    if (!hasTargets) {\n      _browserslist.default.defaults = objectToBrowserslist(targets);\n    }\n\n    const browsers = (0, _browserslist.default)(browsersquery, {\n      path: options.configPath,\n      mobileToDesktop: true,\n      env: options.browserslistEnv\n    });\n    const queryBrowsers = getLowestVersions(browsers);\n    targets = Object.assign(queryBrowsers, targets);\n    _browserslist.default.defaults = browserslistDefaults;\n  }\n\n  const parsed = Object.keys(targets).sort().reduce((results, target) => {\n    var _targetParserMap$targ;\n\n    const value = targets[target];\n\n    if (typeof value === \"number\" && value % 1 !== 0) {\n      results.decimalWarnings.push({\n        target,\n        value\n      });\n    }\n\n    const parser = (_targetParserMap$targ = targetParserMap[target]) != null ? _targetParserMap$targ : targetParserMap.__default;\n    const [parsedTarget, parsedValue] = parser(target, value);\n\n    if (parsedValue) {\n      results.targets[parsedTarget] = parsedValue;\n    }\n\n    return results;\n  }, {\n    targets: targetOpts,\n    decimalWarnings: []\n  });\n  outputDecimalWarning(parsed.decimalWarnings);\n  return parsed.targets;\n}","map":{"version":3,"sources":["/home/agatha/open/node_modules/@babel/helper-compilation-targets/lib/index.js"],"names":["Object","defineProperty","exports","value","isBrowsersQueryValid","default","getTargets","enumerable","get","_targets","unreleasedLabels","_pretty","prettifyTargets","_debug","getInclusionReasons","_filterItems","isRequired","_browserslist","_interopRequireDefault","require","_levenary","_invariant","_nativeModules","_utils","_options","_interopRequireWildcard","_getRequireWildcardCache","WeakMap","cache","obj","__esModule","has","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","browserslistDefaults","defaults","validBrowserslistTargets","keys","data","aliases","objectToBrowserslist","object","reduce","list","targetName","indexOf","targetVersion","concat","validateTargetNames","targets","validTargets","TargetNames","target","Error","browsers","Array","isArray","validateBrowsers","String","getLowestVersions","all","browser","browserName","browserVersion","split","normalizedBrowserName","browserNameMap","splitVersion","toLowerCase","isSplitUnreleased","isUnreleasedVersion","semverify","version","isUnreleased","getLowestUnreleased","parsedBrowserVersion","semverMin","e","outputDecimalWarning","decimalTargets","length","console","log","forEach","semverifyTarget","error","targetParserMap","__default","node","parsed","process","versions","inputTargets","options","targetOpts","esmodules","supportsESModules","map","join","browsersquery","input","assign","shouldParseBrowsers","hasTargets","shouldSearchForConfig","ignoreBrowserslistConfig","path","configPath","mobileToDesktop","env","browserslistEnv","queryBrowsers","sort","results","_targetParserMap$targ","decimalWarnings","push","parser","parsedTarget","parsedValue"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isBrowsersQueryValid = isBrowsersQueryValid;\nexports.default = getTargets;\nObject.defineProperty(exports, \"unreleasedLabels\", {\n  enumerable: true,\n  get: function () {\n    return _targets.unreleasedLabels;\n  }\n});\nObject.defineProperty(exports, \"prettifyTargets\", {\n  enumerable: true,\n  get: function () {\n    return _pretty.prettifyTargets;\n  }\n});\nObject.defineProperty(exports, \"getInclusionReasons\", {\n  enumerable: true,\n  get: function () {\n    return _debug.getInclusionReasons;\n  }\n});\nObject.defineProperty(exports, \"filterItems\", {\n  enumerable: true,\n  get: function () {\n    return _filterItems.default;\n  }\n});\nObject.defineProperty(exports, \"isRequired\", {\n  enumerable: true,\n  get: function () {\n    return _filterItems.isRequired;\n  }\n});\n\nvar _browserslist = _interopRequireDefault(require(\"browserslist\"));\n\nvar _levenary = _interopRequireDefault(require(\"levenary\"));\n\nvar _invariant = _interopRequireDefault(require(\"invariant\"));\n\nvar _nativeModules = _interopRequireDefault(require(\"@babel/compat-data/native-modules\"));\n\nvar _utils = require(\"./utils\");\n\nvar _targets = require(\"./targets\");\n\nvar _options = require(\"./options\");\n\nvar _pretty = require(\"./pretty\");\n\nvar _debug = require(\"./debug\");\n\nvar _filterItems = _interopRequireWildcard(require(\"./filter-items\"));\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst browserslistDefaults = _browserslist.default.defaults;\nconst validBrowserslistTargets = [...Object.keys(_browserslist.default.data), ...Object.keys(_browserslist.default.aliases)];\n\nfunction objectToBrowserslist(object) {\n  return Object.keys(object).reduce((list, targetName) => {\n    if (validBrowserslistTargets.indexOf(targetName) >= 0) {\n      const targetVersion = object[targetName];\n      return list.concat(`${targetName} ${targetVersion}`);\n    }\n\n    return list;\n  }, []);\n}\n\nfunction validateTargetNames(targets) {\n  const validTargets = Object.keys(_options.TargetNames);\n\n  for (const target in targets) {\n    if (!_options.TargetNames[target]) {\n      throw new Error(`Invalid Option: '${target}' is not a valid target\n        Maybe you meant to use '${(0, _levenary.default)(target, validTargets)}'?`);\n    }\n  }\n\n  return targets;\n}\n\nfunction isBrowsersQueryValid(browsers) {\n  return typeof browsers === \"string\" || Array.isArray(browsers);\n}\n\nfunction validateBrowsers(browsers) {\n  (0, _invariant.default)(typeof browsers === \"undefined\" || isBrowsersQueryValid(browsers), `Invalid Option: '${String(browsers)}' is not a valid browserslist query`);\n  return browsers;\n}\n\nfunction getLowestVersions(browsers) {\n  return browsers.reduce((all, browser) => {\n    const [browserName, browserVersion] = browser.split(\" \");\n    const normalizedBrowserName = _targets.browserNameMap[browserName];\n\n    if (!normalizedBrowserName) {\n      return all;\n    }\n\n    try {\n      const splitVersion = browserVersion.split(\"-\")[0].toLowerCase();\n      const isSplitUnreleased = (0, _utils.isUnreleasedVersion)(splitVersion, browserName);\n\n      if (!all[normalizedBrowserName]) {\n        all[normalizedBrowserName] = isSplitUnreleased ? splitVersion : (0, _utils.semverify)(splitVersion);\n        return all;\n      }\n\n      const version = all[normalizedBrowserName];\n      const isUnreleased = (0, _utils.isUnreleasedVersion)(version, browserName);\n\n      if (isUnreleased && isSplitUnreleased) {\n        all[normalizedBrowserName] = (0, _utils.getLowestUnreleased)(version, splitVersion, browserName);\n      } else if (isUnreleased) {\n        all[normalizedBrowserName] = (0, _utils.semverify)(splitVersion);\n      } else if (!isUnreleased && !isSplitUnreleased) {\n        const parsedBrowserVersion = (0, _utils.semverify)(splitVersion);\n        all[normalizedBrowserName] = (0, _utils.semverMin)(version, parsedBrowserVersion);\n      }\n    } catch (e) {}\n\n    return all;\n  }, {});\n}\n\nfunction outputDecimalWarning(decimalTargets) {\n  if (!(decimalTargets == null ? void 0 : decimalTargets.length)) {\n    return;\n  }\n\n  console.log(\"Warning, the following targets are using a decimal version:\");\n  console.log(\"\");\n  decimalTargets.forEach(({\n    target,\n    value\n  }) => console.log(`  ${target}: ${value}`));\n  console.log(\"\");\n  console.log(\"We recommend using a string for minor/patch versions to avoid numbers like 6.10\");\n  console.log(\"getting parsed as 6.1, which can lead to unexpected behavior.\");\n  console.log(\"\");\n}\n\nfunction semverifyTarget(target, value) {\n  try {\n    return (0, _utils.semverify)(value);\n  } catch (error) {\n    throw new Error(`Invalid Option: '${value}' is not a valid value for 'targets.${target}'.`);\n  }\n}\n\nconst targetParserMap = {\n  __default(target, value) {\n    const version = (0, _utils.isUnreleasedVersion)(value, target) ? value.toLowerCase() : semverifyTarget(target, value);\n    return [target, version];\n  },\n\n  node(target, value) {\n    const parsed = value === true || value === \"current\" ? process.versions.node : semverifyTarget(target, value);\n    return [target, parsed];\n  }\n\n};\n\nfunction getTargets(inputTargets = {}, options = {}) {\n  const targetOpts = {};\n  let {\n    browsers\n  } = inputTargets;\n\n  if (inputTargets.esmodules) {\n    const supportsESModules = _nativeModules.default[\"es6.module\"];\n    browsers = Object.keys(supportsESModules).map(browser => `${browser} ${supportsESModules[browser]}`).join(\", \");\n  }\n\n  const browsersquery = validateBrowsers(browsers);\n  const input = Object.assign({}, inputTargets);\n  delete input.esmodules;\n  delete input.browsers;\n  let targets = validateTargetNames(input);\n  const shouldParseBrowsers = !!browsersquery;\n  const hasTargets = shouldParseBrowsers || Object.keys(targets).length > 0;\n  const shouldSearchForConfig = !options.ignoreBrowserslistConfig && !hasTargets;\n\n  if (shouldParseBrowsers || shouldSearchForConfig) {\n    if (!hasTargets) {\n      _browserslist.default.defaults = objectToBrowserslist(targets);\n    }\n\n    const browsers = (0, _browserslist.default)(browsersquery, {\n      path: options.configPath,\n      mobileToDesktop: true,\n      env: options.browserslistEnv\n    });\n    const queryBrowsers = getLowestVersions(browsers);\n    targets = Object.assign(queryBrowsers, targets);\n    _browserslist.default.defaults = browserslistDefaults;\n  }\n\n  const parsed = Object.keys(targets).sort().reduce((results, target) => {\n    var _targetParserMap$targ;\n\n    const value = targets[target];\n\n    if (typeof value === \"number\" && value % 1 !== 0) {\n      results.decimalWarnings.push({\n        target,\n        value\n      });\n    }\n\n    const parser = (_targetParserMap$targ = targetParserMap[target]) != null ? _targetParserMap$targ : targetParserMap.__default;\n    const [parsedTarget, parsedValue] = parser(target, value);\n\n    if (parsedValue) {\n      results.targets[parsedTarget] = parsedValue;\n    }\n\n    return results;\n  }, {\n    targets: targetOpts,\n    decimalWarnings: []\n  });\n  outputDecimalWarning(parsed.decimalWarnings);\n  return parsed.targets;\n}"]},"metadata":{},"sourceType":"script"}