{"ast":null,"code":"import * as babel from '@babel/core';\nimport { transformSync, buildExternalHelpers, loadPartialConfig, DEFAULT_EXTENSIONS } from '@babel/core';\nimport { createFilter } from 'rollup-pluginutils';\nimport { addNamed } from '@babel/helper-module-imports';\nvar INLINE = {};\nvar RUNTIME = {};\nvar EXTERNAL = {}; // NOTE: DO NOT REMOVE the null character `\\0` as it may be used by other plugins\n// e.g. https://github.com/rollup/rollup-plugin-node-resolve/blob/313a3e32f432f9eb18cc4c231cc7aac6df317a51/src/index.js#L74\n\nvar HELPERS = '\\0rollupPluginBabelHelpers.js';\n\nvar addBabelPlugin = function (options, plugin) {\n  return Object.assign({}, options, {\n    plugins: options.plugins.concat(plugin)\n  });\n};\n\nvar warned = {};\n\nfunction warnOnce(ctx, msg) {\n  if (warned[msg]) {\n    return;\n  }\n\n  warned[msg] = true;\n  ctx.warn(msg);\n}\n\nvar regExpCharactersRegExp = /[\\\\^$.*+?()[\\]{}|]/g;\n\nvar escapeRegExpCharacters = function (str) {\n  return str.replace(regExpCharactersRegExp, '\\\\$&');\n};\n\nvar MODULE_ERROR = 'Rollup requires that your Babel configuration keeps ES6 module syntax intact. ' + 'Unfortunately it looks like your configuration specifies a module transformer ' + 'to replace ES6 modules with another module format. To continue you have to disable it.' + '\\n\\n' + \"Most commonly it's a CommonJS transform added by @babel/preset-env - \" + 'in such case you should disable it by adding `modules: false` option to that preset ' + '(described in more detail here - https://github.com/rollup/rollup-plugin-babel#modules ).';\nvar UNEXPECTED_ERROR = 'An unexpected situation arose. Please raise an issue at ' + 'https://github.com/rollup/rollup-plugin-babel/issues. Thanks!';\n\nfunction fallbackClassTransform() {\n  return {\n    visitor: {\n      ClassDeclaration: function ClassDeclaration(path, state) {\n        path.replaceWith(state.file.addHelper('inherits'));\n      }\n    }\n  };\n}\n\nfunction createPreflightCheck() {\n  var preflightCheckResults = {};\n  return function (ctx, options) {\n    var key = options.filename;\n\n    if (preflightCheckResults[key] === undefined) {\n      var helpers;\n      var inputCode = 'class Foo extends Bar {};\\nexport default Foo;';\n      var transformed = transformSync(inputCode, options);\n      var check = transformed.code;\n\n      if (~check.indexOf('class ')) {\n        check = transformSync(inputCode, addBabelPlugin(options, fallbackClassTransform)).code;\n      }\n\n      if (!~check.indexOf('export default') && !~check.indexOf('export default Foo') && !~check.indexOf('export { Foo as default }')) {\n        ctx.error(MODULE_ERROR);\n      }\n\n      if (check.match(/\\/helpers\\/(esm\\/)?inherits/)) {\n        helpers = RUNTIME;\n      } else if (~check.indexOf('function _inherits')) {\n        helpers = INLINE;\n      } else if (~check.indexOf('babelHelpers')) {\n        helpers = EXTERNAL;\n      } else {\n        ctx.error(UNEXPECTED_ERROR);\n      }\n\n      preflightCheckResults[key] = helpers;\n    }\n\n    return preflightCheckResults[key];\n  };\n}\n\nfunction importHelperPlugin() {\n  return {\n    pre: function pre(file) {\n      var cachedHelpers = {};\n      file.set('helperGenerator', function (name) {\n        if (!file.availableHelper(name)) {\n          return;\n        }\n\n        if (cachedHelpers[name]) {\n          return cachedHelpers[name];\n        }\n\n        return cachedHelpers[name] = addNamed(file.path, name, HELPERS);\n      });\n    }\n  };\n}\n\nfunction objectWithoutProperties(obj, exclude) {\n  var target = {};\n\n  for (var k in obj) if (Object.prototype.hasOwnProperty.call(obj, k) && exclude.indexOf(k) === -1) target[k] = obj[k];\n\n  return target;\n}\n\nvar unpackOptions = function (ref) {\n  if (ref === void 0) ref = {};\n  var extensions = ref.extensions;\n  if (extensions === void 0) extensions = DEFAULT_EXTENSIONS;\n  var sourcemap = ref.sourcemap;\n  if (sourcemap === void 0) sourcemap = true;\n  var sourcemaps = ref.sourcemaps;\n  if (sourcemaps === void 0) sourcemaps = true;\n  var sourceMap = ref.sourceMap;\n  if (sourceMap === void 0) sourceMap = true;\n  var sourceMaps = ref.sourceMaps;\n  if (sourceMaps === void 0) sourceMaps = true;\n  var rest$1 = objectWithoutProperties(ref, [\"extensions\", \"sourcemap\", \"sourcemaps\", \"sourceMap\", \"sourceMaps\"]);\n  var rest = rest$1;\n  return Object.assign({}, {\n    extensions: extensions,\n    plugins: [],\n    sourceMaps: sourcemap && sourcemaps && sourceMap && sourceMaps\n  }, rest, {\n    caller: Object.assign({}, {\n      name: 'rollup-plugin-babel',\n      supportsStaticESM: true,\n      supportsDynamicImport: true\n    }, rest.caller)\n  });\n};\n\nvar returnObject = function () {\n  return {};\n};\n\nfunction createBabelPluginFactory(customCallback) {\n  if (customCallback === void 0) customCallback = returnObject;\n  var overrides = customCallback(babel);\n  return function (pluginOptions) {\n    var assign;\n    var customOptions = null;\n\n    if (overrides.options) {\n      var overridden = overrides.options(pluginOptions);\n\n      if (typeof overridden.then === 'function') {\n        throw new Error(\".options hook can't be asynchronous. It should return `{ customOptions, pluginsOptions }` synchronously.\");\n      }\n\n      assign = overridden, customOptions = assign.customOptions, customOptions = customOptions === void 0 ? null : customOptions, pluginOptions = assign.pluginOptions;\n    }\n\n    var ref = unpackOptions(pluginOptions);\n    var exclude = ref.exclude;\n    var extensions = ref.extensions;\n    var externalHelpers = ref.externalHelpers;\n    var externalHelpersWhitelist = ref.externalHelpersWhitelist;\n    var include = ref.include;\n    var runtimeHelpers = ref.runtimeHelpers;\n    var rest = objectWithoutProperties(ref, [\"exclude\", \"extensions\", \"externalHelpers\", \"externalHelpersWhitelist\", \"include\", \"runtimeHelpers\"]);\n    var babelOptions = rest;\n    var extensionRegExp = new RegExp(\"(\" + extensions.map(escapeRegExpCharacters).join('|') + \")$\");\n    var includeExcludeFilter = createFilter(include, exclude);\n\n    var filter = function (id) {\n      return extensionRegExp.test(id) && includeExcludeFilter(id);\n    };\n\n    var preflightCheck = createPreflightCheck();\n    return {\n      name: 'babel',\n      resolveId: function resolveId(id) {\n        if (id === HELPERS) {\n          return id;\n        }\n      },\n      load: function load(id) {\n        if (id !== HELPERS) {\n          return;\n        }\n\n        return buildExternalHelpers(externalHelpersWhitelist, 'module');\n      },\n      transform: function transform(code, filename) {\n        var this$1 = this;\n\n        if (!filter(filename)) {\n          return Promise.resolve(null);\n        }\n\n        if (filename === HELPERS) {\n          return Promise.resolve(null);\n        }\n\n        var config = loadPartialConfig(Object.assign({}, babelOptions, {\n          filename: filename\n        })); // file is ignored\n\n        if (!config) {\n          return Promise.resolve(null);\n        }\n\n        return Promise.resolve(!overrides.config ? config.options : overrides.config.call(this, config, {\n          code: code,\n          customOptions: customOptions\n        })).then(function (transformOptions) {\n          var helpers = preflightCheck(this$1, transformOptions);\n\n          if (helpers === EXTERNAL && !externalHelpers) {\n            warnOnce(this$1, 'Using \"external-helpers\" plugin with rollup-plugin-babel is deprecated, as it now automatically deduplicates your Babel helpers.');\n          } else if (helpers === RUNTIME && !runtimeHelpers) {\n            this$1.error('Runtime helpers are not enabled. Either exclude the transform-runtime Babel plugin or pass the `runtimeHelpers: true` option. See https://github.com/rollup/rollup-plugin-babel#configuring-babel for more information');\n          }\n\n          if (helpers !== RUNTIME && !externalHelpers) {\n            transformOptions = addBabelPlugin(transformOptions, importHelperPlugin);\n          }\n\n          var result = transformSync(code, transformOptions);\n          return Promise.resolve(!overrides.result ? result : overrides.result.call(this$1, result, {\n            code: code,\n            customOptions: customOptions,\n            config: config,\n            transformOptions: transformOptions\n          })).then(function (ref) {\n            var code = ref.code;\n            var map = ref.map;\n            return {\n              code: code,\n              map: map\n            };\n          });\n        });\n      }\n    };\n  };\n}\n\nvar babelPluginFactory = createBabelPluginFactory();\nbabelPluginFactory.custom = createBabelPluginFactory;\nexport default babelPluginFactory;","map":{"version":3,"sources":["../src/constants.js","../src/utils.js","../src/preflightCheck.js","../src/helperPlugin.js","../src/index.js"],"names":["const","let","babel.DEFAULT_EXTENSIONS","babel.buildExternalHelpers","babel.loadPartialConfig","this","helperPlugin","babel.transformSync"],"mappings":";;;;AAAOA,IAAM,MAAM,GAAG,EAAfA;AACAA,IAAM,OAAO,GAAG,EAAhBA;AACAA,IAAM,QAAQ,GAAG,EAAjBA,C;;;AAIAA,IAAM,OAAO,GAAG,+BAAhBA;;ACNAA,IAAM,cAAc,GAAA,UAAI,OAAJ,EAAa,MAAb,EAAqB;AAAA,SAAI,MAAA,CAAA,MAAA,CAAA,EAAA,EAAK,OAAL,EAAY;AAAE,IAAA,OAAO,EAAE,OAAO,CAAC,OAAR,CAAgB,MAAhB,CAAuB,MAAvB;AAAX,GAAZ,CAAJ;AAA4D,CAArGA;;AAEPC,IAAI,MAAM,GAAG,EAAbA;;AACO,SAAS,QAAT,CAAkB,GAAlB,EAAuB,GAAvB,EAA4B;AAClC,MAAI,MAAM,CAAC,GAAD,CAAV,EAAe;AAAE;AAAO;;AACxB,EAAA,MAAM,CAAC,GAAD,CAAN,GAAc,IAAd;AACA,EAAA,GAAG,CAAC,IAAJ,CAAS,GAAT;AACA;;AAEDD,IAAM,sBAAsB,GAAG,qBAA/BA;;AACOA,IAAM,sBAAsB,GAAA,UAAG,GAAH,EAAO;AAAA,SAAG,GAAG,CAAC,OAAJ,CAAY,sBAAZ,EAAoC,MAApC,CAAH;AAA8C,CAAjFA;;ACNPA,IAAM,YAAY,GACjB,mFACA,gFADA,GAEA,wFAFA,GAGA,MAHA,GAIA,uEAJA,GAKA,sFALA,GAMA,2FAPDA;AASAA,IAAM,gBAAgB,GACrB,6DACA,+DAFDA;;AAIA,SAAS,sBAAT,GAAkC;AACjC,SAAO;AACN,IAAA,OAAO,EAAE;AACR,MAAA,gBAAA,EAAA,SAAA,gBAAA,CAAiB,IAAjB,EAAuB,KAAvB,EAA8B;AAC7B,QAAA,IAAI,CAAC,WAAL,CAAiB,KAAK,CAAC,IAAN,CAAW,SAAX,CAAqB,UAArB,CAAjB;AACA;AAHO;AADH,GAAP;AAOA;;AAEc,SAAS,oBAAT,GAAgC;AAC9CC,MAAI,qBAAqB,GAAG,EAA5BA;AAEA,SAAA,UAAQ,GAAR,EAAa,OAAb,EAAsB;AACrBD,QAAM,GAAG,GAAG,OAAO,CAAC,QAApBA;;AAEA,QAAI,qBAAqB,CAAC,GAAD,CAArB,KAA+B,SAAnC,EAA8C;AAC7CC,UAAI,OAAJA;AAEAD,UAAM,SAAS,GAAG,gDAAlBA;AACAA,UAAM,WAAW,GAAG,aAAa,CAAC,SAAD,EAAY,OAAZ,CAAjCA;AAEAC,UAAI,KAAK,GAAG,WAAW,CAAC,IAAxBA;;AAEA,UAAI,CAAC,KAAK,CAAC,OAAN,CAAc,QAAd,CAAL,EAA8B;AAC7B,QAAA,KAAK,GAAG,aAAa,CAAC,SAAD,EAAY,cAAc,CAAC,OAAD,EAAU,sBAAV,CAA1B,CAAb,CAA0E,IAAlF;AACA;;AAED,UACC,CAAC,CAAC,KAAK,CAAC,OAAN,CAAc,gBAAd,CAAF,IACA,CAAC,CAAC,KAAK,CAAC,OAAN,CAAc,oBAAd,CADF,IAEA,CAAC,CAAC,KAAK,CAAC,OAAN,CAAc,2BAAd,CAHH,EAIE;AACD,QAAA,GAAG,CAAC,KAAJ,CAAU,YAAV;AACA;;AAED,UAAI,KAAK,CAAC,KAAN,CAAY,6BAAZ,CAAJ,EAA8C;AAAE,QAAA,OAAO,GAAG,OAAV;AAAkB,OAAlE,MACK,IAAI,CAAC,KAAK,CAAC,OAAN,CAAc,oBAAd,CAAL,EAAwC;AAAE,QAAA,OAAO,GAAG,MAAV;AAAiB,OAA3D,MACA,IAAI,CAAC,KAAK,CAAC,OAAN,CAAc,cAAd,CAAL,EAAkC;AAAE,QAAA,OAAO,GAAG,QAAV;AAAmB,OAAvD,MACA;AACJ,QAAA,GAAG,CAAC,KAAJ,CAAU,gBAAV;AACA;;AAED,MAAA,qBAAqB,CAAC,GAAD,CAArB,GAA6B,OAA7B;AACA;;AAED,WAAO,qBAAqB,CAAC,GAAD,CAA5B;AACA,GAlCD;;;AC3Bc,SAAS,kBAAT,GAA8B;AAC5C,SAAO;AACN,IAAA,GAAA,EAAA,SAAA,GAAA,CAAI,IAAJ,EAAU;AACTD,UAAM,aAAa,GAAG,EAAtBA;AACA,MAAA,IAAI,CAAC,GAAL,CAAS,iBAAT,EAA0B,UAAE,IAAF,EAAO;AAChC,YAAI,CAAC,IAAI,CAAC,eAAL,CAAqB,IAArB,CAAL,EAAiC;AAChC;AACA;;AAED,YAAI,aAAa,CAAC,IAAD,CAAjB,EAAyB;AACxB,iBAAO,aAAa,CAAC,IAAD,CAApB;AACA;;AAED,eAAQ,aAAa,CAAC,IAAD,CAAb,GAAsB,QAAQ,CAAC,IAAI,CAAC,IAAN,EAAY,IAAZ,EAAkB,OAAlB,CAAtC;AACA,OAVD;AAWA;AAdK,GAAP;;;;;;;;;;;ACGDA,IAAM,aAAa,GAAA,UAAI,GAAJ,EASX;yBAAP,GAAG,E;;0CARUE,kB;;wCAGD,I;;0CACC,I;;wCACD,I;;0CACC,I;mGACV,Y;;SACQ,MAAA,CAAA,MAAA,CAAA,EAAA,EAAA;AAAA,IAAA,UAAA,EACX,UADW;AAEX,IAAA,OAAO,EAAE,EAFE;AAGX,IAAA,UAAU,EAAE,SAAS,IAAI,UAAb,IAA2B,SAA3B,IAAwC;AAHzC,GAAA,EAIR,IAJQ,E;AAKX,IAAA,MAAM,EAAE,MAAA,CAAA,MAAA,CAAA,EAAA,EAAA;AACP,MAAA,IAAI,EAAE,qBADC;AAEP,MAAA,iBAAiB,EAAE,IAFZ;AAGP,MAAA,qBAAqB,EAAE;AAHhB,KAAA,EAIJ,IAAI,CAAC,MAJD;GALG,C;AAWV,CApBFF;;AAsBAA,IAAM,YAAY,GAAA,YAAM;AAAA,SAAI,EAAJ;AAAO,CAA/BA;;AAEA,SAAS,wBAAT,CAAkC,cAAlC,EAAiE;+CAAjB,GAAG,Y;AAClDA,MAAM,SAAS,GAAG,cAAc,CAAC,KAAD,CAAhCA;AAEA,SAAA,UAAO,aAAP,EAAqB;;AACpBC,QAAI,aAAa,GAAG,IAApBA;;AAEA,QAAI,SAAS,CAAC,OAAd,EAAuB;AACtBD,UAAM,UAAU,GAAG,SAAS,CAAC,OAAV,CAAkB,aAAlB,CAAnBA;;AAEA,UAAI,OAAO,UAAU,CAAC,IAAlB,KAA2B,UAA/B,EAA2C;AAC1C,cAAM,IAAI,KAAJ,CACL,0GADK,CAAN;AAGA;;AACD,MAAA,MAAwC,GAAG,UAA3C,EAA2C,aAAA,GAAA,MAAA,CAAA,aAA3C,EAA2C,aAAA,GAAA,aAAA,KAAA,KAAA,CAAA,GAAxB,IAAwB,GAAxB,aAAnB,EAAyB,aAAA,GAAA,MAAA,CAAA,aAAzB;AACA;;AAED,QAAA,GAQC,GAAG,aAAa,CAAC,aAAD,CARjB;AACC,QAAA,OAAA,GAAA,GAAA,CAAA,OAAA;AACA,QAAA,UAAA,GAAA,GAAA,CAAA,UAAA;AACA,QAAA,eAAA,GAAA,GAAA,CAAA,eAAA;AACA,QAAA,wBAAA,GAAA,GAAA,CAAA,wBAAA;AACA,QAAA,OAAA,GAAA,GAAA,CAAA,OAAA;AACA,QAAA,cAAA,GAAA,GAAA,CAAA,cAAA;AACA,QAAA,IAAA,GAAA,uBAAA,CAAA,GAAA,EAAA,CAAA,SAAA,EAAA,YAAA,EAAA,iBAAA,EAAA,0BAAA,EAAA,SAAA,EAAA,gBAAA,CAAA,CAAA;AAAG,QAAA,YAAA,GAAA,IAAA;AAGJA,QAAM,eAAe,GAAG,IAAI,MAAJ,CAAU,MAAK,UAAU,CAAC,GAAX,CAAe,sBAAf,EAAuC,IAAvC,CAA4C,GAA5C,CAAL,GAAqD,IAA/D,CAAxBA;AACAA,QAAM,oBAAoB,GAAG,YAAY,CAAC,OAAD,EAAU,OAAV,CAAzCA;;AACAA,QAAM,MAAM,GAAA,UAAG,EAAH,EAAM;AAAA,aAAG,eAAe,CAAC,IAAhB,CAAqB,EAArB,KAA4B,oBAAoB,CAAC,EAAD,CAAnD;AAAuD,KAAzEA;;AACAA,QAAM,cAAc,GAAG,oBAAoB,EAA3CA;AAEA,WAAO;AACN,MAAA,IAAI,EAAE,OADA;AAEN,MAAA,SAAA,EAAA,SAAA,SAAA,CAAU,EAAV,EAAc;AACb,YAAI,EAAE,KAAK,OAAX,EAAkB;AAAE,iBAAO,EAAP;AAAU;AAC9B,OAJK;AAKN,MAAA,IAAA,EAAA,SAAA,IAAA,CAAK,EAAL,EAAS;AACR,YAAI,EAAE,KAAK,OAAX,EAAoB;AACnB;AACA;;AAED,eAAOG,oBAA0B,CAAC,wBAAD,EAA2B,QAA3B,CAAjC;AACA,OAXK;AAYN,MAAA,SAAA,EAAA,SAAA,SAAA,CAAU,IAAV,EAAgB,QAAhB,EAA0B;;;AACzB,YAAI,CAAC,MAAM,CAAC,QAAD,CAAX,EAAqB;AAAE,iBAAO,OAAO,CAAC,OAAR,CAAgB,IAAhB,CAAP;AAA6B;;AACpD,YAAI,QAAQ,KAAK,OAAjB,EAAwB;AAAE,iBAAO,OAAO,CAAC,OAAR,CAAgB,IAAhB,CAAP;AAA6B;;AAEvDH,YAAM,MAAM,GAAGI,iBAAuB,CAAC,MAAA,CAAA,MAAA,CAAA,EAAA,EAAK,YAAL,EAAiB;AAAA,UAAA,QAAA,EAAE;AAAF,SAAjB,CAAD,CAAtCJ,CAJyB,C;;AAOzB,YAAI,CAAC,MAAL,EAAa;AACZ,iBAAO,OAAO,CAAC,OAAR,CAAgB,IAAhB,CAAP;AACA;;AAED,eAAO,OAAO,CAAC,OAAR,CACN,CAAC,SAAS,CAAC,MAAX,GACG,MAAM,CAAC,OADV,GAEG,SAAS,CAAC,MAAV,CAAiB,IAAjB,CAAsB,IAAtB,EAA4B,MAA5B,EAAoC;gBACpC,IADoC;yBAEpC;AAFoC,SAApC,CAHG,EAOL,IAPK,CAOD,UAAC,gBAAD,EAAkB;AACvBA,cAAM,OAAO,GAAG,cAAc,CAACK,MAAD,EAAO,gBAAP,CAA9BL;;AAEA,cAAI,OAAO,KAAK,QAAZ,IAAwB,CAAC,eAA7B,EAA8C;AAC7C,YAAA,QAAQ,CACPK,MADO,EAEP,kIAFO,CAAR;AAIA,WALD,MAKO,IAAI,OAAO,KAAK,OAAZ,IAAuB,CAAC,cAA5B,EAA4C;AAClDA,YAAAA,MAAI,CAAC,KAALA,CACC,wNADDA;AAGA;;AAED,cAAI,OAAO,KAAK,OAAZ,IAAuB,CAAC,eAA5B,EAA6C;AAC5C,YAAA,gBAAgB,GAAG,cAAc,CAAC,gBAAD,EAAmBC,kBAAnB,CAAjC;AACA;;AAEDN,cAAM,MAAM,GAAGO,aAAmB,CAAC,IAAD,EAAO,gBAAP,CAAlCP;AAEA,iBAAO,OAAO,CAAC,OAAR,CACN,CAAC,SAAS,CAAC,MAAX,GACG,MADH,GAEG,SAAS,CAAC,MAAV,CAAiB,IAAjB,CAAsBK,MAAtB,EAA4B,MAA5B,EAAoC;kBACpC,IADoC;2BAEpC,aAFoC;oBAGpC,MAHoC;8BAIpC;AAJoC,WAApC,CAHG,EASL,IATK,CASD,UAAE,GAAF,EAAiB;2BAAP,I;;mBAAW;AAAA,cAAA,IAAA,EAAE,IAAF;AAAM,cAAA,GAAA,EAAE;AAAR,a;AAAc,WATlC,CAAP;AAUA,SArCM,CAAP;AAsCA;AA7DK,KAAP;AA+DA,GA5FD;AA6FA;;AAEDL,IAAM,kBAAkB,GAAG,wBAAwB,EAAnDA;AACA,kBAAkB,CAAC,MAAnB,GAA4B,wBAA5B","sourcesContent":["export const INLINE = {};\nexport const RUNTIME = {};\nexport const EXTERNAL = {};\n\n// NOTE: DO NOT REMOVE the null character `\\0` as it may be used by other plugins\n// e.g. https://github.com/rollup/rollup-plugin-node-resolve/blob/313a3e32f432f9eb18cc4c231cc7aac6df317a51/src/index.js#L74\nexport const HELPERS = '\\0rollupPluginBabelHelpers.js';\n","export const addBabelPlugin = (options, plugin) => ({ ...options, plugins: options.plugins.concat(plugin) });\n\nlet warned = {};\nexport function warnOnce(ctx, msg) {\n\tif (warned[msg]) return;\n\twarned[msg] = true;\n\tctx.warn(msg);\n}\n\nconst regExpCharactersRegExp = /[\\\\^$.*+?()[\\]{}|]/g;\nexport const escapeRegExpCharacters = str => str.replace(regExpCharactersRegExp, '\\\\$&');\n","import { transformSync } from '@babel/core';\nimport { INLINE, RUNTIME, EXTERNAL } from './constants.js';\nimport { addBabelPlugin } from './utils.js';\n\nconst MODULE_ERROR =\n\t'Rollup requires that your Babel configuration keeps ES6 module syntax intact. ' +\n\t'Unfortunately it looks like your configuration specifies a module transformer ' +\n\t'to replace ES6 modules with another module format. To continue you have to disable it.' +\n\t'\\n\\n' +\n\t\"Most commonly it's a CommonJS transform added by @babel/preset-env - \" +\n\t'in such case you should disable it by adding `modules: false` option to that preset ' +\n\t'(described in more detail here - https://github.com/rollup/rollup-plugin-babel#modules ).';\n\nconst UNEXPECTED_ERROR =\n\t'An unexpected situation arose. Please raise an issue at ' +\n\t'https://github.com/rollup/rollup-plugin-babel/issues. Thanks!';\n\nfunction fallbackClassTransform() {\n\treturn {\n\t\tvisitor: {\n\t\t\tClassDeclaration(path, state) {\n\t\t\t\tpath.replaceWith(state.file.addHelper('inherits'));\n\t\t\t},\n\t\t},\n\t};\n}\n\nexport default function createPreflightCheck() {\n\tlet preflightCheckResults = {};\n\n\treturn (ctx, options) => {\n\t\tconst key = options.filename;\n\n\t\tif (preflightCheckResults[key] === undefined) {\n\t\t\tlet helpers;\n\n\t\t\tconst inputCode = 'class Foo extends Bar {};\\nexport default Foo;';\n\t\t\tconst transformed = transformSync(inputCode, options);\n\n\t\t\tlet check = transformed.code;\n\n\t\t\tif (~check.indexOf('class ')) {\n\t\t\t\tcheck = transformSync(inputCode, addBabelPlugin(options, fallbackClassTransform)).code;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t!~check.indexOf('export default') &&\n\t\t\t\t!~check.indexOf('export default Foo') &&\n\t\t\t\t!~check.indexOf('export { Foo as default }')\n\t\t\t) {\n\t\t\t\tctx.error(MODULE_ERROR);\n\t\t\t}\n\n\t\t\tif (check.match(/\\/helpers\\/(esm\\/)?inherits/)) helpers = RUNTIME;\n\t\t\telse if (~check.indexOf('function _inherits')) helpers = INLINE;\n\t\t\telse if (~check.indexOf('babelHelpers')) helpers = EXTERNAL;\n\t\t\telse {\n\t\t\t\tctx.error(UNEXPECTED_ERROR);\n\t\t\t}\n\n\t\t\tpreflightCheckResults[key] = helpers;\n\t\t}\n\n\t\treturn preflightCheckResults[key];\n\t};\n}\n","import { HELPERS } from './constants.js';\nimport { addNamed } from '@babel/helper-module-imports';\n\nexport default function importHelperPlugin() {\n\treturn {\n\t\tpre(file) {\n\t\t\tconst cachedHelpers = {};\n\t\t\tfile.set('helperGenerator', name => {\n\t\t\t\tif (!file.availableHelper(name)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (cachedHelpers[name]) {\n\t\t\t\t\treturn cachedHelpers[name];\n\t\t\t\t}\n\n\t\t\t\treturn (cachedHelpers[name] = addNamed(file.path, name, HELPERS));\n\t\t\t});\n\t\t},\n\t};\n}\n","import * as babel from '@babel/core';\nimport { createFilter } from 'rollup-pluginutils';\nimport createPreflightCheck from './preflightCheck.js';\nimport helperPlugin from './helperPlugin.js';\nimport { addBabelPlugin, escapeRegExpCharacters, warnOnce } from './utils.js';\nimport { RUNTIME, EXTERNAL, HELPERS } from './constants.js';\n\nconst unpackOptions = ({\n\textensions = babel.DEFAULT_EXTENSIONS,\n\t// rollup uses sourcemap, babel uses sourceMaps\n\t// just normalize them here so people don't have to worry about it\n\tsourcemap = true,\n\tsourcemaps = true,\n\tsourceMap = true,\n\tsourceMaps = true,\n\t...rest\n} = {}) => ({\n\textensions,\n\tplugins: [],\n\tsourceMaps: sourcemap && sourcemaps && sourceMap && sourceMaps,\n\t...rest,\n\tcaller: {\n\t\tname: 'rollup-plugin-babel',\n\t\tsupportsStaticESM: true,\n\t\tsupportsDynamicImport: true,\n\t\t...rest.caller,\n\t},\n});\n\nconst returnObject = () => ({});\n\nfunction createBabelPluginFactory(customCallback = returnObject) {\n\tconst overrides = customCallback(babel);\n\n\treturn pluginOptions => {\n\t\tlet customOptions = null;\n\n\t\tif (overrides.options) {\n\t\t\tconst overridden = overrides.options(pluginOptions);\n\n\t\t\tif (typeof overridden.then === 'function') {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t\".options hook can't be asynchronous. It should return `{ customOptions, pluginsOptions }` synchronously.\",\n\t\t\t\t);\n\t\t\t}\n\t\t\t({ customOptions = null, pluginOptions } = overridden);\n\t\t}\n\n\t\tconst {\n\t\t\texclude,\n\t\t\textensions,\n\t\t\texternalHelpers,\n\t\t\texternalHelpersWhitelist,\n\t\t\tinclude,\n\t\t\truntimeHelpers,\n\t\t\t...babelOptions\n\t\t} = unpackOptions(pluginOptions);\n\n\t\tconst extensionRegExp = new RegExp(`(${extensions.map(escapeRegExpCharacters).join('|')})$`);\n\t\tconst includeExcludeFilter = createFilter(include, exclude);\n\t\tconst filter = id => extensionRegExp.test(id) && includeExcludeFilter(id);\n\t\tconst preflightCheck = createPreflightCheck();\n\n\t\treturn {\n\t\t\tname: 'babel',\n\t\t\tresolveId(id) {\n\t\t\t\tif (id === HELPERS) return id;\n\t\t\t},\n\t\t\tload(id) {\n\t\t\t\tif (id !== HELPERS) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\treturn babel.buildExternalHelpers(externalHelpersWhitelist, 'module');\n\t\t\t},\n\t\t\ttransform(code, filename) {\n\t\t\t\tif (!filter(filename)) return Promise.resolve(null);\n\t\t\t\tif (filename === HELPERS) return Promise.resolve(null);\n\n\t\t\t\tconst config = babel.loadPartialConfig({ ...babelOptions, filename });\n\n\t\t\t\t// file is ignored\n\t\t\t\tif (!config) {\n\t\t\t\t\treturn Promise.resolve(null);\n\t\t\t\t}\n\n\t\t\t\treturn Promise.resolve(\n\t\t\t\t\t!overrides.config\n\t\t\t\t\t\t? config.options\n\t\t\t\t\t\t: overrides.config.call(this, config, {\n\t\t\t\t\t\t\t\tcode,\n\t\t\t\t\t\t\t\tcustomOptions,\n\t\t\t\t\t\t  }),\n\t\t\t\t).then(transformOptions => {\n\t\t\t\t\tconst helpers = preflightCheck(this, transformOptions);\n\n\t\t\t\t\tif (helpers === EXTERNAL && !externalHelpers) {\n\t\t\t\t\t\twarnOnce(\n\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t'Using \"external-helpers\" plugin with rollup-plugin-babel is deprecated, as it now automatically deduplicates your Babel helpers.',\n\t\t\t\t\t\t);\n\t\t\t\t\t} else if (helpers === RUNTIME && !runtimeHelpers) {\n\t\t\t\t\t\tthis.error(\n\t\t\t\t\t\t\t'Runtime helpers are not enabled. Either exclude the transform-runtime Babel plugin or pass the `runtimeHelpers: true` option. See https://github.com/rollup/rollup-plugin-babel#configuring-babel for more information',\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (helpers !== RUNTIME && !externalHelpers) {\n\t\t\t\t\t\ttransformOptions = addBabelPlugin(transformOptions, helperPlugin);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst result = babel.transformSync(code, transformOptions);\n\n\t\t\t\t\treturn Promise.resolve(\n\t\t\t\t\t\t!overrides.result\n\t\t\t\t\t\t\t? result\n\t\t\t\t\t\t\t: overrides.result.call(this, result, {\n\t\t\t\t\t\t\t\t\tcode,\n\t\t\t\t\t\t\t\t\tcustomOptions,\n\t\t\t\t\t\t\t\t\tconfig,\n\t\t\t\t\t\t\t\t\ttransformOptions,\n\t\t\t\t\t\t\t  }),\n\t\t\t\t\t).then(({ code, map }) => ({ code, map }));\n\t\t\t\t});\n\t\t\t},\n\t\t};\n\t};\n}\n\nconst babelPluginFactory = createBabelPluginFactory();\nbabelPluginFactory.custom = createBabelPluginFactory;\n\nexport default babelPluginFactory;\n"]},"metadata":{},"sourceType":"module"}